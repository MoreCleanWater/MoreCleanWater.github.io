(this["webpackJsonpmore-clean-water"]=this["webpackJsonpmore-clean-water"]||[]).push([[0],{108:function(e,t,a){},21:function(e,t,a){e.exports={container:"Cards_container__3GIVR",root:"Cards_root__2HafK",updateRoot:"Cards_updateRoot__1yfPW",updateContent:"Cards_updateContent__3giI4",updateTitle:"Cards_updateTitle__WTpVQ",updateDescription:"Cards_updateDescription__35Sqe",dismissButton:"Cards_dismissButton__3MOD4",header:"Cards_header__2Y4ge",content:"Cards_content__1vgyn",mediaArea:"Cards_mediaArea__sd2z_",viewContent:"Cards_viewContent__-Vx1x",admin:"Cards_admin__1acgD",awarenessContent:"Cards_awarenessContent__1eDSA",containerModal:"Cards_containerModal__1EhYD",contentModal:"Cards_contentModal__2Ua6y",text:"Cards_text__279rP",backButton:"Cards_backButton__2eaWq"}},25:function(e,t,a){e.exports={container:"Admin_container__1XN1b",dataGrid:"Admin_dataGrid__2djKt",textEditor:"Admin_textEditor__3Myol",editForm:"Admin_editForm__1_4TT",content:"Admin_content__g4muY",menuList:"Admin_menuList__uqoyD",menuItem__nested:"Admin_menuItem__nested__3R2KA",idLabel:"Admin_idLabel__3jUKu",inactive:"Admin_inactive__E9ca_"}},274:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){},298:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},413:function(e,t,a){},414:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),o=a.n(c),i=a(17),s=a.n(i),r=a(6),l=a(20),d=a(27),u=a(28),j=a(12),b=a(478),m=a(88),O=a(9),h=a.n(O),p=a(15),x=a.n(p),f=a(124),g=a.n(f),v=a(51),y=a.n(v),w=a(221);var N=function(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.variant,r=e.color,l=e.options,d=e.className,u=e.onChange,b=e.onFocus;return Object(n.jsx)(w.a,Object(j.a)(Object(j.a)({autoComplete:"on",name:t,id:t,label:a,value:c,error:o,helperText:i,variant:s||"outlined",color:r||"primary",className:d},l),{},{onChange:u,onFocus:b}))},S=a(36),C=a(86),_=a(135),k=a(133),I=a(77),P=a(201),E=a.n(P),A=a(422);var z=function(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.variant,r=e.color,l=e.options,d=e.className,u=e.dataProvider,b=e.onChange,m=e.onFocus;return Object(n.jsxs)(C.a,{variant:s||"outlined",color:r||"primary",className:d,error:o,children:[!u&&Object(n.jsx)(E.a,{className:"loading absolute",style:{right:"-2.5rem",top:".8rem"}}),Object(n.jsx)(_.a,{id:"".concat(t,"-label"),children:a}),Object(n.jsxs)(k.a,Object(j.a)(Object(j.a)({id:t,name:t,label:a,labelId:"".concat(t,"-label"),value:c},l),{},{onChange:b,onFocus:m,children:[Object(n.jsx)(I.a,{value:null,children:"\xa0"}),Object(S.a)(u).map((function(e){return Object(n.jsx)(I.a,{value:e.countyId,children:e.county},e.countyId)}))]})),Object(n.jsx)(A.a,{children:i})]})},T=a(224),F=a(424);var D=function(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.color,r=e.options,l=e.className,d=e.onChange;return Object(n.jsxs)("div",{className:l,children:[Object(n.jsx)(F.a,{name:t,id:t,control:Object(n.jsx)(T.a,Object(j.a)(Object(j.a)({checked:c,color:s||"primary"},r),{},{onChange:d})),label:a,error:o}),Object(n.jsx)(A.a,{children:i})]})},L={value:""},q={errors:{},isValidated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=!0,c=t.filter((function(e){return e.required&&e.step===a})),o=Object(j.a)({},this.errors);return c.forEach((function(t){o[t.name]="",e[t.name]||(o[t.name]="Ops! This field is required",n=!1)})),e.confirmPassword&&""!==e.password&&""!==e.confirmPassword&&(e.password!==e.confirmPassword?(o.password="Ops, passwords don't match",o.confirmPassword="Ops, passwords don't match",n=!1):(o.password="",o.confirmPassword="")),e.email&&!/\S+@\S+\.\S+/.test(e.email)?(o.email="Ops, invalid email detected",n=!1):o.email="",this.errors=Object(j.a)(Object(j.a)({},this.errors),o),[n,this.errors]}},W=a(479);a(274);function B(){return Object(n.jsx)("div",{className:"ocean-wrapper",children:Object(n.jsxs)("div",{className:"ocean",children:[Object(n.jsx)("div",{className:"wave"}),Object(n.jsx)("div",{className:"wave"})]})})}var R=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),t=Object(r.a)(e,1)[0],a=Object(c.useState)({userName:"",postcode:"",countyId:"",firstName:"",lastName:"",password:"",confirmPassword:"",email:L.value,isSubscriber:""}),o=Object(r.a)(a,2),i=o[0],s=o[1],O=Object(c.useState)("idle"),p=Object(r.a)(O,2),f=p[0],v=p[1],w=[{label:"Email",name:"email",required:!0,component:N,options:{autoComplete:"off"},step:0},{label:"Username",name:"userName",required:!0,component:N,step:0},{label:"Password",name:"password",required:!0,component:N,options:{type:"password"},step:0},{label:"Confirm Password",name:"confirmPassword",required:!0,component:N,options:{type:"password"},step:0},{label:"First Name",name:"firstName",required:!0,component:N,step:1},{label:"Last Name",name:"lastName",required:!0,component:N,step:1},{label:"County",name:"countyId",required:!0,component:z,dataProvider:t,step:1},{label:"Post Code",name:"postcode",required:!0,component:N,step:1},{label:"Receive water alerts?",name:"isSubscriber",required:!1,component:D,step:1}],S=Object(c.useState)({}),C=Object(r.a)(S,2),_=C[0],k=C[1],I=function(e){return k(q.isValidated(i,w))},P=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;s(Object(j.a)(Object(j.a)({},i),{},Object(u.a)({},e.target.name,t)))},E=Object(c.useState)(0),A=Object(r.a)(E,2),T=A[0],F=A[1],R=function(){var e=Object(j.a)({},i);delete e.confirmPassword,v("loading"),x.a.post("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/add",e).then((function(t){"User is created successfully"===t.data?x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/login",{userName:e.userName,password:e.password}).then((function(e){"Invalid email or password"!==e&&localStorage.setItem("userId",e.data),v("success")})).catch((function(e){console.log(e),v("error")})):v("error")})).catch((function(e){console.log(e),v("error")}))};return"success"===f?Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"fullHeight",children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(g.a,{color:"primary",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Woo hoo!"}),Object(n.jsxs)("p",{style:{lineHeight:1.5},children:["Welcome! ",Object(n.jsx)("br",{})," You account has been created"]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,component:l.c,to:"/find-water",style:{marginTop:"1rem"},children:"GO TO APP"})})]})}):localStorage.getItem("userId")?Object(n.jsx)(d.a,{to:"/find-water"}):Object(n.jsxs)(b.a,{container:!0,justify:"center",className:h.a.container,children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===f?"":"hidden")}),Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"full-height ".concat("error"===f?"":"hidden"),children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{className:"alertColor",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Uh oh!"}),Object(n.jsxs)("p",{style:{lineHeight:1.5},children:["Something weird happened. ",Object(n.jsx)("br",{})," Keep calm and try again."]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",disableElevation:!0,onClick:function(e){return v("idle")},style:{marginTop:"1rem"},children:"BACK"})})]})}),Object(n.jsxs)(b.a,{item:!0,xs:11,md:5,className:h.a.content,children:[Object(n.jsx)(B,{}),Object(n.jsx)("h2",{className:h.a.title,children:"User registration"}),Object(n.jsx)("p",{className:h.a.subtitle}),Object(n.jsxs)("form",{children:[Object(n.jsxs)("ul",{children:[["Account details","Local information"].map((function(e,t){return Object(n.jsx)("li",{className:T===t?" active-flex":"",children:w.filter((function(e){return e.step===t})).map((function(e){var t=e.component;return Object(n.jsx)(t,{id:e.name,name:e.name,label:e.label,value:i[e.name],error:_[e.name]?"error":"",helperText:_[e.name],className:h.a.formInput,options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:P,onFocus:I},e.name)}))},t)})),Object(n.jsx)("li",{className:2===T?" active-flex":"",children:Object(n.jsxs)("ul",{className:h.a.confirmation,children:[Object(n.jsxs)("li",{children:["Username: ",i.userName]}),Object(n.jsxs)("li",{children:["Email: ",i.email]}),Object(n.jsxs)("li",{children:["Password: ",i.password?i.password.split("").map((function(e){return"\u2022"})):""]}),Object(n.jsxs)("li",{children:["First name: ",i.firstName]}),Object(n.jsxs)("li",{children:["Last Name: ",i.lastName]}),Object(n.jsxs)("li",{children:["Receive water alerts? ",i.isSubscriber?"Yes":"No"]}),Object(n.jsxs)("li",{children:["County: ",t&&i.countyId?t.find((function(e){return e.countyId===i.countyId})).county:""]}),Object(n.jsxs)("li",{children:["Post code: ",i.postcode]})]})})]}),Object(n.jsxs)("div",{className:h.a.buttons,children:[0===T?"":Object(n.jsx)(m.a,{variant:"text",color:"primary",disableElevation:!0,onClick:function(e){return F(T>0?T-1:T)},disabled:"loading"===f?"disabled":"",children:"Previous"}),T<2?Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(i,w,T),a=Object(r.a)(t,2),n=a[0],c=a[1];return k(c),n?F(T<2?T+1:2):n},children:"Next"}):"",T<2?"":Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(i,w),a=Object(r.a)(t,2),n=a[0],c=a[1];return k(c),n?R():n},disabled:"loading"===f?"disabled":"",children:"Submit"})]})]})]})]})};a(108);var U=function(){var e=Object(c.useState)({userName:"",password:""}),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)("idle"),s=Object(r.a)(i,2),O=s[0],p=s[1],f=[{label:"Username",name:"userName",required:!0,component:N},{label:"Password",name:"password",required:!0,component:N,options:{type:"password"}}],g=Object(c.useState)({}),v=Object(r.a)(g,2),w=v[0],S=v[1],C=function(e){return S(q.isValidated(a,f))},_=function(e){return o(Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},e.target.name,e.target.value)))},k=function(){p("loading"),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/login",a).then((function(e){"Invalid email or password"===e.data?p("error"):(localStorage.setItem("userId",e.data),p("success"))})).catch((function(e){console.log(e),p("error")}))};return"success"===O?Object(n.jsx)(d.a,{push:!0,to:"/find-water"}):Object(n.jsxs)(b.a,{justify:"center",className:"".concat(h.a.container),children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===O?"":"hidden")}),Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"full-height ".concat("error"===O?"":"hidden"),children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{className:"alertColor",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Uh oh!"}),Object(n.jsxs)("p",{children:["Invalid email or password. ",Object(n.jsx)("br",{})," Please try again."]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",disableElevation:!0,onClick:function(e){return p("idle")},style:{marginTop:"1rem"},children:"BACK"})})]})}),Object(n.jsxs)(b.a,{item:!0,xs:11,md:5,className:"".concat(h.a.content," ").concat("error"===O?"hidden":""),children:[Object(n.jsx)(B,{}),Object(n.jsx)("h2",{className:h.a.title,children:"Sign in"}),Object(n.jsxs)("form",{className:h.a.signInForm,children:[f.map((function(e){var t=e.component;return Object(n.jsx)(t,{id:e.name,name:e.name,label:e.label,value:a[e.name],error:w[e.name]?"error":"",helperText:w[e.name],className:h.a.formInput,options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:_,onFocus:C})})),Object(n.jsx)("p",{style:{fontSize:".75rem",margin:"-.85rem 0 1.5rem"},children:"Forgot password?"}),Object(n.jsxs)("div",{className:h.a.buttons,children:[Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(a,f),n=Object(r.a)(t,2),c=n[0],o=n[1];return S(o),c?k():c},disabled:"loading"===O?"disabled":"",children:"Submit"}),Object(n.jsxs)("div",{className:h.a.actions,children:[Object(n.jsx)("p",{children:"Don't have an account yet?"}),Object(n.jsx)(m.a,{variant:"outlined",color:"primary",disableElevation:!0,component:l.c,to:"/signup",disabled:"loading"===O?"disabled":"",children:"Sign Up"}),Object(n.jsx)(l.c,{to:"/find-water",className:"enter",children:Object(n.jsx)("p",{children:"Or proceed without sign up"})})]})]})]})]})]})},M=a(480),H=a(481),G=a(49),V=a(482),K=(a(278),a(21)),J=a.n(K);var Y=function(e){var t=e.id,a=e.title,c=e.description,o=e.markAsRead;return Object(n.jsxs)(M.a,{className:J.a.updateRoot,children:[Object(n.jsxs)(H.a,{className:J.a.updateContent,children:[Object(n.jsx)(G.a,{className:J.a.updateTitle,gutterBottom:!0,children:a+" alert"}),Object(n.jsx)(G.a,{className:J.a.updateDescription,children:c})]}),Object(n.jsx)(V.a,{onClick:function(e){o(t)},style:{position:"relative"},children:Object(n.jsx)(m.a,{size:"small",className:J.a.dismissButton,children:"Dismiss"})})]})};var X=function(){var e=Object(c.useState)(localStorage.getItem("userId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)([]),o=Object(r.a)(a,2),i=o[0],s=o[1],d=Object(c.useState)("idle"),u=Object(r.a)(d,2),O=u[0],h=u[1],p=[{type:"shortage",title:"Water shortage",description:"A Water shortage was detected in your area"},{type:"dirty",title:"Dirty water",description:"Dirty water sources was detected in your area"}];Object(c.useEffect)((function(){f()}),[]);var f=function(){h("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/alert/"+t).then((function(e){if(console.log(e.data),e.data){var t=e.data.map((function(e,t){return Object(j.a)(Object(j.a)({},e),{},{id:String(t),title:p.find((function(t){return t.type===e.alertType})).title,description:p.find((function(t){return t.type===e.alertType})).description})}));s(t),h("idle")}else h("error"),console.log(e.data)})).catch((function(e){h("error"),console.log(e)}))},g=function(e){h("loading"),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/read/alert/"+t).then((function(e){"Alert status is updated successfully"===e.data?(f(),h("success")):(console.log(e),h("error"))})).catch((function(e){console.log(e),h("error")}))},v=i.filter((function(e){return!e.isReaded}));return t?Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===O?"":"hidden")}),Object(n.jsx)("ul",{className:"updates-list",children:v.map((function(e){return Object(n.jsx)(Y,{id:e.id,title:e.title,description:e.description,markAsRead:g},e.id)}))}),Object(n.jsx)("div",{className:"total",children:v.length>0?"Total updates: ".concat(v.length):Object(n.jsx)(b.a,{className:"fullHeightMobile no-items",container:!0,justify:"center",alignItems:"center",children:"Hooray! No updates!"})})]}):Object(n.jsx)(b.a,{className:"updatesNotSigned no-items",container:!0,justify:"center",alignItems:"center",children:Object(n.jsxs)(b.a,{container:!0,className:"content",xs:10,md:12,children:[Object(n.jsx)("h2",{style:{margin:0},children:"Sign up now"}),Object(n.jsx)("p",{style:{textAlign:"center",padding:"0 4rem"},children:"And receive water alerts directly in your device"}),Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,component:l.c,to:"/signup",style:{margin:"1rem 0"},children:"Sign Up"}),Object(n.jsx)("p",{children:"Are you already registered?"}),Object(n.jsx)(m.a,{variant:"text",color:"primary",disableElevation:!0,component:l.c,to:"/signin",children:"Sign in"})]})})};a(279);var Q=function(){return Object(n.jsx)(b.a,{container:!0,justify:"center",className:"updates fullHeight",children:Object(n.jsx)(b.a,{item:!0,xs:12,children:Object(n.jsx)(X,{})})})};var Z=function(){var e=Object(c.useState)({userName:"",password:""}),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)("idle"),s=Object(r.a)(i,2),l=s[0],O=s[1],p=[{label:"Username",name:"userName",required:!0,component:N},{label:"Password",name:"password",required:!0,component:N,options:{type:"password"}}],x=Object(c.useState)({}),f=Object(r.a)(x,2),g=f[0],v=f[1],w=function(e){return v(q.isValidated(a,p))},S=function(e){return o(Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},e.target.name,e.target.value)))},C=function(){console.log(a),O("loading"),"admin"===a.userName&&"admin1234"===a.password?(localStorage.setItem("adminId",1),setTimeout((function(){O("success")}),1500)):O("error")};return"success"===l?Object(n.jsx)(d.a,{push:!0,to:"/admin/users"}):Object(n.jsxs)(b.a,{justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===l?"":"hidden")}),Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"full-height ".concat("error"===l?"":"hidden"),children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{className:"alertColor",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Uh oh!"}),Object(n.jsxs)("p",{children:["Invalid email or password. ",Object(n.jsx)("br",{})," Please try again."]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",disableElevation:!0,onClick:function(e){return O("idle")},style:{marginTop:"1rem"},children:"BACK"})})]})}),Object(n.jsxs)(b.a,{item:!0,xs:11,md:5,className:"".concat(h.a.content," ").concat("error"===l?"hidden":""),children:[Object(n.jsx)("h2",{className:h.a.title,children:"Admin area"}),Object(n.jsxs)("form",{className:h.a.signInForm,children:[p.map((function(e){var t=e.component;return Object(n.jsx)(t,{id:e.name,name:e.name,label:e.label,value:a[e.name],error:g[e.name]?"error":"",helperText:g[e.name],className:h.a.formInput,options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:S,onFocus:w})})),Object(n.jsx)("p",{style:{fontSize:".75rem",margin:"-.85rem 0 1.5rem"}}),Object(n.jsx)("div",{className:h.a.buttons,children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(a,p),n=Object(r.a)(t,2),c=n[0],o=n[1];return v(o),c?C():c},disabled:"loading"===l?"disabled":"",children:"Submit"})})]})]})]})},$=a(428),ee=a(426),te=a(484),ae=a(25),ne=a.n(ae),ce=a(125);var oe=function(e){var t=e.style;return Object(n.jsxs)("div",{style:t,className:ne.a.dataGrid,children:[Object(n.jsx)("div",{className:ne.a.content,children:Object(n.jsx)(ce.a,Object(j.a)(Object(j.a)({},e),{},{className:"",style:{}}))}),Object(n.jsx)("div",{className:ne.a.buttons,children:e.children})]})},ie=a(497);var se=function(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),o=Object(r.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)(),u=Object(r.a)(l,2),m=u[0],O=u[1];Object(c.useEffect)((function(){p()}),[]);var p=function(){w("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/list").then((function(e){e.data?i?f(e.data):x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/county/list").then((function(t){t.data&&(t.data.sort((function(e,t){return e.countyResponse>t.countyResponse?1:-1})),localStorage.setItem("countyList",JSON.stringify(t.data)),s(JSON.parse(localStorage.getItem("countyList"))),f(e.data,t.data))})).catch((function(e){return console.log(e)})):console.log(e)})).catch((function(e){return console.log(e)}))},f=function(e,t){t||(t=i);var a=e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{id:String(e.userId),county:e.countyId&&t.find((function(t){return e.countyId===t.countyId})).county})}));O(a),w("success")},g=Object(c.useState)("idle"),v=Object(r.a)(g,2),y=v[0],w=v[1];return t?m?Object(n.jsxs)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:[Object(n.jsx)(te.a,{open:"success"===y,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:function(e,t){"clickaway"!==t&&w("idle")},children:Object(n.jsx)(ie.a,{severity:"success",children:"Data successfully loaded"})}),Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:h.a.content,children:[Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.admin),children:"Users"}),Object(n.jsx)(oe,{className:ne.a.dataGrid,rows:m,columns:[{field:"userId",headerName:"ID",width:70},{field:"userName",headerName:"Username",width:140},{field:"firstName",headerName:"First name",width:130},{field:"lastName",headerName:"Last name",width:130},{field:"email",headerName:"Email",width:200},{field:"county",headerName:"County",width:160},{field:"postcode",headerName:"Post code",width:120}],disableColumnSelector:!0,disableSelectionOnClick:!0,showToolbar:!0,autoPageSize:!0})]})]}):Object(n.jsx)($.a,{className:"circularProgress",open:!m,children:Object(n.jsx)(ee.a,{color:"inherit"})}):Object(n.jsx)(d.a,{to:"/admin"})};var re=function(e){var t=e.mode,a=e.inputItems,o=e.data,i=e.status,s=e.variant,l=e.style,d=e.onSubmit,b=e.onCancel,O=Object(c.useState)(o),p=Object(r.a)(O,2),x=p[0],f=p[1];Object(c.useEffect)((function(){f(o)}),[o]);var g=Object(c.useState)({}),v=Object(r.a)(g,2),y=v[0],w=v[1],N=function(e){return w(q.isValidated(x,a))},S=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;f(Object(j.a)(Object(j.a)({},x),{},Object(u.a)({},e.target.name,t))),console.log(x)};return Object(n.jsxs)("form",{className:h.a.adminForm,style:l,children:[Object(n.jsx)("div",{style:{flexGrow:1},children:a.map((function(e,t){var a=e.component;return Object(n.jsx)(a,{id:e.name,name:e.name,label:e.label,value:x[e.name]?x[e.name]:"",error:y[e.name]?"error":"",helperText:y[e.name],className:h.a.formInput,style:{style:l},variant:s||"outlined",options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:S,onFocus:N},e.name)}))}),Object(n.jsxs)("div",{className:"".concat(h.a.buttons," ").concat(h.a.admin),children:[Object(n.jsxs)(m.a,{variant:"contained",color:"primary",size:"small",onClick:function(e){var t=q.isValidated(x,a),n=Object(r.a)(t,2),c=n[0],o=n[1];return w(o),c?d(x):c},disableElevation:!0,disabled:"loading"===i?"disabled":"",children:["create"===t&&"Create","update"===t&&"Update"]}),Object(n.jsx)(m.a,{variant:"outlined",size:"small",style:{marginLeft:16},onClick:function(e){b()},disableElevation:!0,disabled:"loading"===i?"disabled":"",children:"Cancel"})]})]})},le=a(126),de=a.n(le);var ue=function(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),o=Object(r.a)(a,2),i=o[0],s=o[1],l=[{field:"stationId",headerName:"ID",width:70,cellClassName:function(e){return e.row.isWorking?"":ne.a.inactive}},{field:"county",headerName:"County",width:270,cellClassName:function(e){return e.row.isWorking?"":ne.a.inactive}},{field:"postcode",headerName:"Post Code",width:150,cellClassName:function(e){return e.row.isWorking?"":ne.a.inactive}},{field:"size",headerName:"Size",width:100,cellClassName:function(e){return e.row.isWorking?"":ne.a.inactive}},{field:"capacity",headerName:"Capacity",width:100,cellClassName:function(e){return e.row.isWorking?"":ne.a.inactive}},{field:"isWorking",headerName:"Active?",width:100,cellClassName:function(e){return e.row.isWorking?"":ne.a.inactive},renderCell:function(e){return Object(n.jsx)("div",{style:{height:"100%",width:"100%",textAlign:"center"},id:e.row.id,onChange:B,className:e.row.isWorking&&String(e.row.isWorking),children:Object(n.jsx)(D,{value:e.row.isWorking})})}},{field:"actions",headerName:"Actions",sortable:!1,width:100,flex:1,cellClassName:function(e){return e.row.isWorking?"":ne.a.inactive},renderCell:function(e){return Object(n.jsx)("div",{style:{display:"flex",height:"100%",alignItems:"center"},children:Object(n.jsx)(de.a,{id:e.row.id,onClick:R,style:{cursor:"pointer",color:"#78787c",marginLeft:".2rem"}})})}}],u=[{label:"County",name:"countyId",required:!0,component:z,dataProvider:i},{label:"Post Code",name:"postcode",required:!0,component:N},{label:"Size",name:"size",required:!0,component:N,options:{className:"".concat(h.a.formInput," ").concat(h.a.col2)}},{label:"Capacity",name:"capacity",required:!0,component:N,options:{className:"".concat(h.a.formInput," ").concat(h.a.col2)}}],O=Object(c.useState)(),p=Object(r.a)(O,2),f=p[0],g=p[1],v=function(){var e={};return u.sort((function(e,t){return e.order-t.order})).forEach((function(t){e[t.name]=""})),e},y=Object(c.useState)("retrieve"),w=Object(r.a)(y,2),S=w[0],C=w[1],_=Object(c.useState)("idle"),k=Object(r.a)(_,2),I=k[0],P=k[1],E=Object(c.useState)(v),A=Object(r.a)(E,2),T=A[0],F=A[1];Object(c.useEffect)((function(){L()}),[]);var L=function(){P("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/list").then((function(e){e.data?i?q(e.data):x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/county/list").then((function(t){t.data&&(t.data.sort((function(e,t){return e.countyResponse>t.countyResponse?1:-1})),localStorage.setItem("countyList",JSON.stringify(t.data)),s(JSON.parse(localStorage.getItem("countyList"))),q(e.data,t.data))})).catch((function(e){return console.log(e)})):console.log(e)})).catch((function(e){return console.log(e)}))},q=function(e,t){t||(t=i);var a=e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{id:String(e.stationId),county:e.countyId&&t.find((function(t){return e.countyId===t.countyId})).county})}));g(a),C("retrieve"),P("success"),F(v)},B=function(e){P("loading");var t=f.find((function(t){return t.id===e.currentTarget.id})).stationId,a=Boolean(e.currentTarget.className)?"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/delete/"+t:"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/activate/"+t;x.a.get(a).then((function(e){e.data,L()})).catch((function(e){console.log(e),P("error")}))},R=function(e){F(f.filter((function(t){return t.id===e.currentTarget.id}))[0]),C("update")},U=function(e){P("loading"),delete e.additionalInfo,console.log(e),x.a.post("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/add",e).then((function(e){"Stations is created successfully"===e.data?L():(console.log(e),P("error"))})).catch((function(e){console.log(e),P("error")}))},M=function(e){P("loading"),delete e.additionalInfo,delete e.id,delete e.county,delete e.installDate,delete e.installationDate,delete e.postcodeId,delete e.isWorking,console.log(e),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/edit/"+e.stationId,e).then((function(e){"Station is updated successfully"===e.data?L():(console.log(e),P("error"))})).catch((function(e){console.log(e),P("error")}))},H=Object(c.useState)(!1),G=Object(r.a)(H,2),V=G[0],K=G[1],J=function(e,t){"clickaway"!==t&&P("idle")};return t?f?Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===I?"":"hidden")}),Object(n.jsx)(te.a,{open:"success"===I,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:J,children:Object(n.jsx)(ie.a,{onClose:J,severity:"success",children:"Data successfully loaded"})}),Object(n.jsx)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:h.a.content,children:[Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.admin),children:"Water Stations"}),Object(n.jsxs)(oe,{style:{display:"retrieve"===S?"flex":"none"},rows:f,columns:l,onSelectionChange:function(e){var t;0===e.rowIds.length?K(!1):K(!0),t=e.rowIds,console.log(t)},disableSelectionOnClick:!0,disableColumnSelector:!0,showToolbar:!0,autoPageSize:!0,children:[Object(n.jsx)(m.a,{variant:"contained",size:"small",onClick:function(e){C("create")},color:"primary",disableElevation:!0,disabled:"loading"===I?"disabled":"",children:"Add"}),Object(n.jsx)(m.a,{variant:"text",size:"small",style:{marginLeft:16},onClick:function(e){},className:V?"":"hidden",disableElevation:!0,disabled:"loading"===I?"disabled":"",children:"Delete"})]}),Object(n.jsx)(re,{mode:S,inputItems:u,data:T,status:I,style:{display:"retrieve"!==S?"flex":"none"},onSubmit:function(e){"create"===S&&U(e),"update"===S&&M(e)},onCancel:function(){C("retrieve"),F(v)}})]})})]}):Object(n.jsx)($.a,{className:"circularProgress",open:!f,children:Object(n.jsx)(ee.a,{color:"inherit"})}):Object(n.jsx)(d.a,{to:"/admin"})},je=a(498),be=a(78),me=a(421),Oe=a(486),he=a(423),pe=a(485),xe=a(203),fe=a.n(xe);var ge=function(){var e=o.a.useState(!1),t=Object(r.a)(e,2),a=t[0],i=t[1],s=Object(c.useState)("idle"),u=Object(r.a)(s,2),j=u[0],b=u[1],m=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&i(e)}};return"logout"===j?Object(n.jsx)(d.a,{to:"/admin"}):Object(n.jsxs)(o.a.Fragment,{children:[Object(n.jsx)(be.a,{color:"inherit","aria-label":"open drawer",onClick:m(!0),className:"absolute",children:Object(n.jsx)(fe.a,{})}),Object(n.jsx)(je.a,{anchor:"left",open:a,onClose:m(!1),onOpen:m(!0),children:Object(n.jsx)("div",{className:ne.a.menuList,role:"presentation",onClick:m(!1),onKeyDown:m(!1),children:Object(n.jsxs)(me.a,{children:[Object(n.jsx)(he.a,{button:!0,component:l.c,to:"/admin/users",children:Object(n.jsx)(pe.a,{primary:"Users"})}),Object(n.jsx)(he.a,{button:!0,component:l.c,to:"/admin/water-stations",children:Object(n.jsx)(pe.a,{primary:"Water Stations"})}),Object(n.jsx)(he.a,{children:Object(n.jsx)(pe.a,{primary:"Awareness"})}),Object(n.jsx)(he.a,{button:!0,component:l.c,to:"/admin/awareness-category",children:Object(n.jsx)(pe.a,{primary:"Categories",className:ne.a.menuItem__nested})}),Object(n.jsx)(he.a,{button:!0,component:l.c,to:"/admin/awareness-content",children:Object(n.jsx)(pe.a,{primary:"Content",className:ne.a.menuItem__nested})}),Object(n.jsx)(he.a,{button:!0,component:l.c,to:"/admin/events",children:Object(n.jsx)(pe.a,{primary:"Events"})}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(he.a,{button:!0,onClick:function(e){localStorage.removeItem("adminId"),b("logout")},children:Object(n.jsx)(pe.a,{primary:"Logout"})})]})})})]},"left")},ve=a(487),ye=a(488),we=a(489),Ne=a(490),Se=a(491),Ce=a(433);var _e=function(){var e=Object(c.useState)(),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)("idle"),s=Object(r.a)(i,2),l=s[0],O=s[1],p=Object(c.useState)(localStorage.getItem("userId")),f=Object(r.a)(p,1)[0],g=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),v=Object(r.a)(g,1)[0],w=[{label:"Email",name:"email",required:!0,component:N},{label:"First Name",name:"firstName",required:!0,component:N},{label:"Last Name",name:"lastName",required:!0,component:N},{label:"County",name:"countyId",required:!0,type:"combobox",component:z,dataProvider:v},{label:"Post Code",name:"postcode",required:!0,component:N}];Object(c.useEffect)((function(){S()}),[]);var S=function(){O("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/"+f).then((function(e){if(e.data){var t={};w.map((function(e){return e.name})).forEach((function(a){return t[a]=e.data[0][a]})),t.isSubscriber=e.data[0].isSubscriber,o(t),O("idle")}else console.log(e.data),O("error")})).catch((function(e){O("error"),console.log(e)}))},C=Object(c.useState)({}),_=Object(r.a)(C,2),k=_[0],I=_[1],P=function(e){return I(q.isValidated(a,w))},E=function(e){return o(Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},e.target.name,e.target.value)))},A=function(e){O("loading"),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/edit/"+f,a).then((function(e){console.log(e),"User is updated successfully"===e.data?O("success"):O("error")})).catch((function(e){console.log(e),O("error")}))},T=function(e,t){"clickaway"!==t&&O("idle")},F=Object(c.useState)(!1),L=Object(r.a)(F,2),B=L[0],R=L[1],U=function(){"deleted"!==l&&R(!1)};return f?a?(console.log(l),Object(n.jsxs)(b.a,{justify:"center",className:"".concat(h.a.container," ").concat(h.a.profile),children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===l?"":"hidden")}),Object(n.jsxs)(ve.a,{open:B,onClose:U,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(ye.a,{id:"alert-dialog-title",children:"Confirm account delete"}),Object(n.jsx)(we.a,{children:Object(n.jsx)(Ne.a,{id:"alert-dialog-description",children:"This will delete your account permanently. Are you sure you want to proceed?"})}),Object(n.jsxs)(Se.a,{children:[Object(n.jsx)(m.a,{onClick:function(e){O("loading"),x.a.delete("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/deactivate/"+f).then((function(e){"User is deleted successfully"===e.data?(O("deleted"),setTimeout((function(){localStorage.removeItem("userId"),O("idle")}),2e3)):(console.log(e),O("error"))})).catch((function(e){console.log(e),O("error")}))},color:"primary",children:"Yes"}),Object(n.jsx)(m.a,{onClick:U,color:"primary",autoFocus:!0,variant:"contained",disableElevation:!0,children:"No"})]})]}),Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"full-height ".concat("error"===l?"":"hidden"),children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{className:"alertColor",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Uh oh!"}),Object(n.jsxs)("p",{children:["Something weird happened. ",Object(n.jsx)("br",{})," Please try again later."]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",disableElevation:!0,onClick:function(e){return O("idle")},style:{marginTop:"1rem"},children:"BACK"})})]})}),Object(n.jsxs)(b.a,{item:!0,xs:11,md:8,className:"".concat(h.a.content," ").concat("error"!==l?"":"hidden"),children:[Object(n.jsx)(te.a,{open:"success"===l||"deleted"===l,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:T,children:Object(n.jsx)(ie.a,{onClose:T,severity:"success",children:"success"===l?"Profile updated successfully!":"Profile deleted successfully."})}),Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.profile),children:"Profile Manager"}),Object(n.jsxs)("form",{className:h.a.profileForm,children:[Object(n.jsxs)("div",{className:"".concat(h.a.contentBox," ").concat(h.a.userBox),children:[Object(n.jsx)(Ce.a,{notched:!0,disabled:!0,label:"User information",className:h.a.border}),Object(n.jsx)("h4",{children:"User information"}),w.map((function(e){var t=e.component;return Object(n.jsx)(t,{id:e.name,name:e.name,label:e.label,value:a[e.name],error:k[e.name]?"error":"",helperText:k[e.name],className:h.a.formInput,options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:E,onFocus:P})})),Object(n.jsx)("div",{className:"".concat(h.a.buttons," ").concat(h.a.profile),children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(a,w),n=Object(r.a)(t,2),c=n[0],o=n[1];return I(o),c?A():c},disabled:"loading"===l?"disabled":"",children:"Submit"})})]}),Object(n.jsxs)("div",{className:"".concat(h.a.contentBox," ").concat(h.a.subscriptionBox),children:[Object(n.jsx)(Ce.a,{notched:!0,disabled:!0,label:"Manage subscription",className:h.a.border}),Object(n.jsx)("h4",{children:"Manage subscription"}),Object(n.jsx)("div",{onChange:function(e){O("loading");var t=Boolean(e.currentTarget.className)?"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/unsubscribe/"+f:"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/subscribe/"+f;x.a.put(t).then((function(e){e.data,O("success"),o(Object(j.a)(Object(j.a)({},a),{},{isSubscriber:!a.isSubscriber}))})).catch((function(e){console.log(e),O("error")}))},className:a.isSubscriber&&String(a.isSubscriber),children:Object(n.jsx)(D,{value:a.isSubscriber,label:"Receive water alerts?",disabled:"loading"===l?"disabled":""})})]}),Object(n.jsxs)("div",{className:"".concat(h.a.contentBox," ").concat(h.a.deleteBox),children:[Object(n.jsx)(Ce.a,{notched:!0,disabled:!0,label:"Danger zone",className:h.a.border}),Object(n.jsx)("h4",{children:"Danger zone"}),Object(n.jsx)(m.a,{variant:"outlined",color:"primary",disableElevation:!0,onClick:function(){R(!0)},disabled:"loading"===l?"disabled":"",children:"Delete account"})]})]})]})]})):Object(n.jsx)($.a,{className:"circularProgress",open:!a,children:Object(n.jsx)(ee.a,{color:"inherit"})}):Object(n.jsx)(d.a,{to:"/signin"})},ke=a(68),Ie=a(131),Pe=a.n(Ie),Ee=a.p+"static/media/opacity-24px.afba6ef0.svg",Ae=a.p+"static/media/report_problem-24px.865ea719.svg",ze=a.p+"static/media/cloud_off-24px.23148f30.svg";function Te(e){var t=e.shortages,a=e.workingStations,o=e.notWorkingStations,i=e.unsafe,s=e.zoom,l=e.google,d=Object(c.useState)(""),u=Object(r.a)(d,2),b=u[0],m=u[1],O=Object(c.useState)({lat:51.507351,lng:-.127758}),h=Object(r.a)(O,2),p=h[0],x=h[1],f=Object(c.useState)(!1),g=Object(r.a)(f,2),v=g[0],y=g[1],w=Object(c.useState)({}),N=Object(r.a)(w,2),S=N[0],C=N[1],_=Object(c.useState)({}),k=Object(r.a)(_,2),I=k[0],P=k[1],E=null,A=null,z=null,T=null;return null!=t&&(E=t.map((function(e){var t=e.basearea.split(",");return Object(n.jsx)(ke.Marker,{type:"Water shortage detected",countyName:e.county,position:{lat:t[0],lng:t[1]},icon:{url:ze,anchor:new l.maps.Point(22,22),scaledSize:new l.maps.Size(20,20)},onClick:function(e,t){P(e),C(t),y(!v)}},e.catId+" "+e.countyId+" "+e.basearea)}))),null!=a&&(A=a.map((function(e){return Object(n.jsx)(ke.Marker,{type:"Working water station",stationSize:e.size,capacity:e.capacity,installDate:e.installDate,position:{lat:e.lat,lng:e.lang},icon:{url:Ee,anchor:new l.maps.Point(22,22),scaledSize:new l.maps.Size(20,20)},onClick:function(e,t){P(e),C(t),y(!v)}},e.stationId)}))),null!=o&&(z=o.map((function(e){return Object(n.jsx)(ke.Marker,{type:"Water station not working",stationSize:e.size,capacity:e.capacity,installDate:e.installDate,position:{lat:e.lat,lng:e.lang},icon:{url:Ae,anchor:new l.maps.Point(22,22),scaledSize:new l.maps.Size(20,20)},onClick:function(e,t){P(e),C(t),y(!v)}},e.stationId)}))),null!=i&&(T=i.map((function(e){var t=e.basearea.split(",");return Object(n.jsx)(ke.Marker,{type:"Water not safe to drink",countyName:e.county,position:{lat:t[0],lng:t[1]},icon:{url:Ae,anchor:new l.maps.Point(22,22),scaledSize:new l.maps.Size(20,20)},onClick:function(e,t){P(e),C(t),y(!v)}},e.catId+" "+e.countyId+" "+e.basearea)}))),Object(n.jsxs)("div",{id:"googleMaps",children:[Object(n.jsx)(Pe.a,{value:b,onChange:function(e){m(e)},onSelect:function(e){m(e),Object(Ie.geocodeByAddress)(b).then((function(e){return Object(Ie.getLatLng)(e[0])})).then((function(e){x(e)})).catch((function(e){return console.error("Error",e)}))},children:function(e){var t=e.getInputProps,a=e.suggestions,c=e.getSuggestionItemProps,o=e.loading;return Object(n.jsxs)("div",{style:{position:"relative"},children:[Object(n.jsx)("input",Object(j.a)({},t({placeholder:"Search Places ...",className:"location-search-input"}))),Object(n.jsxs)("div",{className:"autocomplete-dropdown-container",children:[o&&Object(n.jsx)("div",{children:"Loading..."}),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(n.jsx)("div",Object(j.a)(Object(j.a)({},c(e,{className:t,style:a})),{},{children:Object(n.jsx)("span",{children:e.description})}))}))]})]})}}),Object(n.jsxs)(ke.Map,{className:"leMap",disableDefaultUI:!0,google:l,initialCenter:{lat:p.lat,lng:p.lng},center:{lat:p.lat,lng:p.lng},zoom:s,zoomControl:!0,onClick:function(){y(!1)},children:[E,A,z,T,S?Object(n.jsx)(ke.InfoWindow,{visible:v,marker:S,children:Object(n.jsxs)("div",{children:[console.log(I),I.type?Object(n.jsx)("h3",{children:I.type}):null,I.countyName?Object(n.jsxs)("p",{children:["County: ",I.countyName]}):null,I.stationSize?Object(n.jsxs)("p",{children:["Size: ",I.stationSize]}):null,I.capacity?Object(n.jsxs)("p",{children:["Capacity: ",I.capacity]}):null,I.installDate?Object(n.jsxs)("p",{children:["Installation Date: ",I.installDate]}):null]})}):null]})]})}Te.defaultProps={zoom:9};var Fe=Object(ke.GoogleApiWrapper)({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SAMPLING_POINTS:"https://environment.data.gov.uk/water-quality/id/sampling-point",REACT_APP_SAMPLING_POINT_GROUPS_FW:"http://environment.data.gov.uk/water-quality/def/sampling-point-type-groups/F",REACT_APP_SAMPLING_POINT_GROUPS_GW:"http://environment.data.gov.uk/water-quality/def/sampling-point-type-groups/B",REACT_APP_GET_CATEGORY_LIST_API:"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list",REACT_APP_POST_CATEGORY_API:"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/add",REACT_APP_DELETE_CATEGORY_API:"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/delete/"}).REACT_APP_GOOGLE_APIKEY})(Te);a(298);var De=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)([]),s=Object(r.a)(i,2),l=s[0],d=s[1],u=Object(c.useState)([]),j=Object(r.a)(u,2),b=j[0],m=j[1],O=Object(c.useState)([]),h=Object(r.a)(O,2),p=h[0],f=h[1],g=Object(c.useState)(!1),v=Object(r.a)(g,2),y=v[0],w=v[1];return Object(c.useEffect)((function(){w(!0),x.a.all([x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/list"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/shortage/list"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/dirty/list")]).then(x.a.spread((function(e,t,a){m(e.data.filter((function(e){return!0===e.isWorking}))),f(e.data.filter((function(e){return!1===e.isWorking}))),o(t.data),d(a.data),w(!1)}))).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)("div",{className:"fullHeight",children:y?Object(n.jsx)($.a,{className:"circularProgress",open:y,children:Object(n.jsx)(ee.a,{color:"inherit"})}):Object(n.jsx)(Fe,{shortages:a,workingStations:b,notWorkingStations:p,unsafe:l})})};a(299);var Le=function(e){var t=e.children;return Object(n.jsx)("nav",{children:Object(n.jsx)("div",{className:"bottom-bar",children:Object(n.jsx)("ul",{className:"bottom-menu",children:t})})})},qe=a(127),We=a.n(qe),Be=(a(300),a(492)),Re=a(483),Ue=a(220),Me=a(128),He=a.n(Me),Ge=a(204),Ve=a.n(Ge);var Ke=function(){var e=Object(c.useState)("idle"),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)("/signin"),s=Object(r.a)(i,2),u=s[0],j=s[1],m=Object(c.useState)(localStorage.getItem("userId")),O=Object(r.a)(m,1)[0];Object(c.useEffect)((function(){console.log(O),O?(o("login"),j("/profile")):j("/signin")}),[O]);var h=Object(c.useState)(!1),p=Object(r.a)(h,2),x=p[0],f=p[1],g=Object(c.useState)(null),v=Object(r.a)(g,2),y=v[0],w=v[1],N=function(e,t){"clickaway"!==t&&o("idle")},S=function(){w(null)};return"logout"===a?Object(n.jsx)(d.a,{to:"/signin"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(te.a,{open:"login"===a,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:N,children:Object(n.jsx)(ie.a,{onClose:N,severity:"success",children:"User logged in successfully"})}),Object(n.jsx)("div",{className:"appBarContainer",children:Object(n.jsxs)(Be.a,{position:"static",className:"appBar",children:[Object(n.jsx)("h1",{children:"More Clean Water"}),Object(n.jsxs)(Re.a,{className:"toolBar",children:[Object(n.jsxs)(b.a,{container:!0,md:8,className:"desktopOnly",children:[Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(l.c,{to:"/find-water",children:"Find Water"})}),Object(n.jsx)("li",{children:Object(n.jsx)(l.c,{to:"/awareness",children:"Awareness"})})]}),Object(n.jsxs)("div",{className:"notificationsArea",children:[Object(n.jsx)(be.a,{"aria-controls":"notifications-list","aria-haspopup":"true",component:"div",className:"notificationsMenu",onClick:function(e){return f(!x)},children:Object(n.jsx)(We.a,{})}),Object(n.jsxs)("div",{className:"updates-container overlay ".concat(x?"active":""),children:[Object(n.jsx)("div",{className:"arrow",onClick:function(e){return f(!x)},children:Object(n.jsx)(Ve.a,{})}),Object(n.jsx)(X,{})]})]})]}),Object(n.jsx)(be.a,{"aria-controls":"profile-menu","aria-haspopup":"true",component:"div",className:"profileMenu",onClick:function(e){return w(e.currentTarget)},children:Object(n.jsx)(He.a,{className:"profileIcon"})}),Object(n.jsxs)(Ue.a,{id:"profile-menu",anchorEl:y,keepMounted:!0,PaperProps:{style:{width:"12ch"}},open:Boolean(y),onClose:S,children:[Object(n.jsx)(I.a,{onClick:S,component:l.b,to:u,children:O?"Profile":"Sign In"}),O?Object(n.jsx)(I.a,{onClick:function(e){localStorage.removeItem("userId"),o("logout"),j("/signin")},children:"Logout"}):""]})]})]})})]})};a(301);var Je=function(e){var t=e.icon,a=e.title,c=e.to;return Object(n.jsx)(l.c,{to:c,children:Object(n.jsxs)("li",{className:"bottom-menu-item",children:[Object(n.jsx)("div",{className:"bottom-menu-item__icon material-icons",children:t}),Object(n.jsx)("div",{className:"bottom-menu-item__title",children:a})]})})},Ye=a(129),Xe=a.n(Ye),Qe=a(205),Ze=a.n(Qe);var $e=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(Ke,{}),Object(n.jsxs)(Le,{children:[Object(n.jsx)(Je,{icon:Object(n.jsx)(Xe.a,{}),title:"Awareness",to:"/awareness"}),Object(n.jsx)(Je,{icon:Object(n.jsx)(Ze.a,{}),title:"Find Water",to:"/find-water"}),Object(n.jsx)(Je,{icon:Object(n.jsx)(We.a,{}),title:"Updates",to:"/updates"})]})]})};var et=function(){var e=[{label:"Email",name:"email",required:!0,component:w.a}],t=Object(c.useState)({email:""}),a=Object(r.a)(t,2),o=a[0],i=a[1],s=Object(c.useState)(null),O=Object(r.a)(s,2),p=O[0],x=O[1],f=Object(c.useState)({}),g=Object(r.a)(f,2),v=g[0],y=g[1],N=function(){var t=!0,a=e.filter((function(e){return e.required})),n=Object(j.a)({},v);return a.forEach((function(e){n[e.name]="",o[e.name]||(n[e.name]="Ops! This field is required",t=!1)})),y(Object(j.a)(Object(j.a)({},v),n)),t};return p?Object(n.jsx)(d.a,{push:!0,to:p}):Object(n.jsxs)("div",{className:"landing-page",children:[Object(n.jsx)(B,{}),Object(n.jsx)("div",{className:"content-wrapper",children:Object(n.jsxs)(b.a,{container:!0,alignContent:"center",className:"content",justify:"center",children:[Object(n.jsxs)("div",{className:"title",children:[Object(n.jsx)("h1",{children:"More Clean Water"}),Object(n.jsx)("h2",{children:"Helping you to access clean water"}),Object(n.jsx)("h3",{children:"Sign up now and receive water shortage alerts, water cleaning advises and more."})]}),Object(n.jsxs)("form",{className:h.a.landingForm,children:[Object(n.jsx)(w.a,{autoComplete:"on",id:"email",name:"email",label:"Email",variant:"outlined",value:o.email,error:v.email?"error":"",helperText:v.email,className:h.a.formInput,onChange:function(e){return i(Object(j.a)(Object(j.a)({},o),{},Object(u.a)({},e.target.name,e.target.value)))}}),Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){N()&&(L.value=o.email,x("/signup"))},children:"Sign Up"}),Object(n.jsxs)("div",{className:h.a.actions,children:[Object(n.jsx)("p",{children:"Are you already registered?"}),Object(n.jsx)(m.a,{variant:"text",color:"primary",disableElevation:!0,component:l.c,to:"/signin",children:"Sign in"}),Object(n.jsx)(l.c,{to:"/find-water",className:h.a.link,children:"Or proceed without sign up"})]})]})]})})]})},tt=a(98);a(415),a(302);tt.a.initializeApp({apiKey:"AIzaSyCUFjz6GWSpfjTNMrB3DTMcCY1RfUg2qzY",authDomain:"awarenesscontent.firebaseapp.com",projectId:"awarenesscontent",storageBucket:"awarenesscontent.appspot.com",messagingSenderId:"485810474234",appId:"1:485810474234:web:1cc85ab2cf326a26164d43"});var at=tt.a.database().ref("/article"),nt=tt.a.storage(),ct=a(206),ot=a.n(ct),it=a(494),st=a(493),rt=a(495),lt=a(496),dt=a(432),ut=a(207),jt=a.n(ut);function bt(e){var t=e.open,a=e.postedArticle,c=e.handleModalClose;return Object(n.jsx)(dt.a,{open:t,onClose:function(){return c(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",BackdropProps:{invisible:!0},children:Object(n.jsxs)(b.a,{container:!0,className:J.a.containerModal,children:[Object(n.jsx)(be.a,{className:J.a.backButton,onClick:function(){return c(!1)},children:Object(n.jsx)(jt.a,{})}),Object(n.jsxs)(b.a,{container:!0,direction:"column",xs:12,md:7,className:J.a.contentModal,children:[Object(n.jsxs)("div",{className:J.a.mediaArea,ref:function(e){return function(e){e&&console.log(e.getBoundingClientRect().width)}(e)},children:[a.image?Object(n.jsx)(st.a,{className:J.a.media,image:a.image,title:a.title}):null,a.video?Object(n.jsx)(st.a,{className:J.a.media,component:"iframe",title:a.title,src:a.video}):null]}),a.body?Object(n.jsx)("div",{className:J.a.text,dangerouslySetInnerHTML:{__html:a.body.substr(0,340)}}):null]})]})})}a(208);var mt=a(209),Ot=a.n(mt),ht=a(499);function pt(e){console.log(J.a);var t=e.article,a=e.uniquekey,o=e.handleEdit,i=e.handleDelete,s=e.mode,l=Object(c.useState)({}),d=Object(r.a)(l,2),u=d[0],j=d[1],O=Object(c.useState)(null),h=Object(r.a)(O,2),p=h[0],x=h[1],f=Object(c.useState)(!1),g=Object(r.a)(f,2),v=g[0],y=g[1],w=Object(c.useState)(!1),N=Object(r.a)(w,2),S=N[0],C=N[1];Object(c.useEffect)((function(){j(t)}),[t]);var _=function(){x(null)},k=function(){y(!0)},P=function(){C(!1)};return Object(n.jsx)(b.a,{item:!0,xs:12,sm:6,lg:4,children:Object(n.jsxs)(M.a,{variant:"outlined",className:J.a.root,children:[Object(n.jsx)(it.a,{className:J.a.header,avatar:Object(n.jsx)(ht.a,{"aria-label":"category",className:J.a.avatar,children:"M"}),action:!!e.isAdmin&&Object(n.jsx)(be.a,{onClick:function(e){x(e.currentTarget)},children:Object(n.jsx)(He.a,{})}),title:u.title}),e.isAdmin?Object(n.jsxs)(Ue.a,{keepMounted:!0,id:"settings-menu",anchorEl:p,open:Boolean(p),onClose:_,children:[Object(n.jsx)(I.a,{onClick:function(){_(),o(a)},children:Object(n.jsx)(G.a,{variant:"caption",children:"Edit"})}),Object(n.jsx)(I.a,{onClick:function(){C(!0),_()},children:Object(n.jsx)(G.a,{variant:"caption",children:"Delete"})})]}):"",Object(n.jsxs)(rt.a,{className:J.a.actionArea,onClick:k,children:[Object(n.jsxs)("div",{className:J.a.mediaArea,children:[u.image?Object(n.jsx)(st.a,{className:J.a.media,image:u.image,title:u.title}):null,u.video?Object(n.jsx)(st.a,{className:J.a.media,component:"iframe",title:u.title,src:u.video}):null]}),Object(n.jsx)(H.a,{className:J.a.content,children:u.body?Object(n.jsx)("div",{dangerouslySetInnerHTML:{__html:u.body.substr(0,125)+" ..."}}):null})]}),"dialogue"!==s?Object(n.jsx)(V.a,{children:Object(n.jsx)(lt.a,{component:"button",variant:"body2",style:{marginLeft:"auto"},onClick:k,children:Object(n.jsx)(Ot.a,{style:{color:"#78787c"}})})}):null,Object(n.jsx)(bt,{open:v,postedArticle:u,handleModalClose:function(e){y(e)}}),Object(n.jsxs)(ve.a,{open:S,onClose:P,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(we.a,{children:Object(n.jsx)(Ne.a,{id:"alert-dialog-description",children:"Are you sure you want to delete?"})}),Object(n.jsxs)(Se.a,{children:[Object(n.jsx)(m.a,{onClick:P,color:"primary",children:"Cancel"}),Object(n.jsx)(m.a,{onClick:function(){return i(a)},color:"primary",autoFocus:!0,children:"OK"})]})]})]})})}function xt(e){var t=e.postedArticle,a=e.setEditKey,o=e.className,i=Object(c.useState)(""),s=Object(r.a)(i,2),l=s[0],d=s[1],u=Object(c.useState)(!1),j=Object(r.a)(u,2),m=j[0],O=j[1],h=function(e){"clickaway"!==e&&O(!1)},p=function(e){console.log("hello "+e),at.child("".concat(e)).remove(),d("Content deleted successfully"),O(!0)},x=function(e){return a(e)};return Object(n.jsxs)("div",{style:e.style,className:"".concat(J.a.viewContent," ").concat(o),children:[Object(n.jsxs)(b.a,{container:!0,className:"".concat(J.a.awarenessContent," ").concat(o),spacing:3,children:[Object(n.jsx)(te.a,{open:m,autoHideDuration:4e3,onClose:h,children:Object(n.jsx)(ie.a,{onClose:h,severity:"success",children:l})}),t?ot.a.map(t,(function(t,a){return function(t,a){return Object(n.jsx)(pt,{article:t,uniquekey:a,handleEdit:x,handleDelete:p,isAdmin:e.isAdmin})}(t,a)})):null]}),Object(n.jsx)("div",{className:J.a.buttons,children:e.children})]})}function ft(){var e=Object(c.useState)("idle"),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)([]),s=Object(r.a)(i,2),l=s[0],d=s[1];Object(c.useEffect)((function(){u()}),[]);var u=function(){o("loading"),console.log("before load data"),at.on("value",(function(e){d(e.val())})),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list").then((function(e){o("success")})).catch((function(e){return console.log(e)})),console.log("after load data")};return Object(n.jsxs)(b.a,{container:!0,justify:"center",className:J.a.container,children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===a?"":"hidden")}),Object(n.jsx)(b.a,{item:!0,xs:11,md:8,children:Object(n.jsx)(xt,{postedArticle:l,isAdmin:!1})})]})}var gt=a(130),vt=a.n(gt);function yt(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)(""),o=Object(r.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)(""),u=Object(r.a)(l,2),j=u[0],O=u[1],p=Object(c.useState)(""),f=Object(r.a)(p,2),g=f[0],v=f[1],y=Object(c.useState)(""),N=Object(r.a)(y,2),S=N[0],C=N[1],_=Object(c.useState)(!1),k=Object(r.a)(_,2),I=k[0],P=k[1],E=Object(c.useState)(!1),A=Object(r.a)(E,2),z=A[0],T=A[1],F=Object(c.useState)([]),D=Object(r.a)(F,2),L=D[0],q=D[1],W=Object(c.useState)([]),B=Object(r.a)(W,2),R=B[0],U=B[1],M=[],H=function(){x.a.delete("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/delete/"+R[0].id).then((function(){v("Section is deleted successfully"),T(!0)})).catch((function(e){C(e.message),P(!0),console.log(e+" error")}))},G=function(){O(""),s("")},V=function(e){"clickaway"!==e&&T(!1)},K=function(e){"clickaway"!==e&&P(!1)},J=[{field:"id",hide:!0},{field:"name",headerName:Object(n.jsx)("strong",{children:"Category"}),flex:.5},{field:"description",headerName:Object(n.jsx)("strong",{children:"Description"}),flex:1},{field:"actions",headerName:Object(n.jsx)("strong",{children:"Actions"}),flex:.5,renderCell:function(){return Object(n.jsx)("div",{children:Object(n.jsx)(vt.a,{style:{cursor:"pointer",color:"#78787c"},onClick:H})})}}];return Object(c.useEffect)((function(){x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list").then((function(e){return q(e.data)})).catch((function(e){return console.log(e)}))}),[z]),"undefined"!==typeof L&&L.length>0&&(M=L.map((function(e){return M[e]=e}))),t?0===L.length?Object(n.jsx)($.a,{className:"circularProgress",open:0===L.length,children:Object(n.jsx)(ee.a,{color:"inherit"})}):Object(n.jsxs)("div",{children:[Object(n.jsx)(te.a,{open:z,autoHideDuration:4e3,onClose:V,children:Object(n.jsx)(ie.a,{onClose:V,severity:"success",children:g})}),Object(n.jsx)(te.a,{open:I,autoHideDuration:4e3,onClose:K,children:Object(n.jsx)(ie.a,{onClose:K,severity:"error",children:S})}),Object(n.jsx)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:h.a.content,children:[Object(n.jsx)("form",{className:h.a.adminForm,children:Object(n.jsxs)("div",{className:"".concat(h.a.title," ").concat(h.a.admin),children:[Object(n.jsx)("h2",{children:"Awareness / Categories"}),Object(n.jsxs)(b.a,{container:!0,className:h.a.adminContent,justify:"space-between",spacing:3,children:[Object(n.jsx)(b.a,{item:!0,xs:12,sm:5,children:Object(n.jsx)(w.a,{required:!0,id:"standard-basic-category",label:"Category name",value:j,onChange:function(e){return O(e.target.value)},variant:"outlined",className:"".concat(h.a.formInput)})}),Object(n.jsx)(b.a,{item:!0,xs:12,sm:5,children:Object(n.jsx)(w.a,{id:"standard-basic-desc",label:"Description",value:i,onChange:function(e){return s(e.target.value)},variant:"outlined",className:"".concat(h.a.formInput)})}),Object(n.jsx)(b.a,{item:!0,xs:12,sm:2,children:Object(n.jsx)(m.a,{variant:"contained",size:"small",color:"primary",disableElevation:!0,disabled:""===j,className:"".concat(h.a.formInput),onClick:function(){x.a.post("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/add",{name:j,description:i}).then((function(){v("Section is created successfully"),T(!0),G()})).catch((function(e){C(e.message),P(!0),console.log(e+" error")}))},children:"SAVE"})})]})]})}),Object(n.jsx)("div",{className:ne.a.dataGrid,children:Object(n.jsx)("div",{className:ne.a.content,children:Object(n.jsx)(ce.a,{rows:M,columns:J,autoPageSize:!0,onRowSelected:function(e){console.log(e.data.id),U(M.filter((function(t){return t.id===e.data.id})))},disableColumnSelector:!0,disableSelectionOnClick:!0})})})]})})]}):Object(n.jsx)(d.a,{to:"/admin"})}var wt=a(210),Nt=a.n(wt),St=(a(403),a(217)),Ct=a(104);function _t(e){var t=e.data,a=e.style,o=e.mode,i=e.status,s=e.onSubmit,l=e.onCancel,d=Object(c.useState)([]),O=Object(r.a)(d,2),p=O[0],f=O[1],g=Object(c.useState)(!1),v=Object(r.a)(g,2),y=v[0],N=v[1],P=Object(c.useState)(null),E=Object(r.a)(P,2),A=E[0],z=E[1],T=Object(c.useState)(""),F=Object(r.a)(T,2),D=F[0],L=(F[1],Object(c.useState)(!1)),q=Object(r.a)(L,2),W=q[0],B=q[1],R=Object(c.useState)(t),U=Object(r.a)(R,2),M=U[0],H=U[1];Object(c.useEffect)((function(){x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list").then((function(e){return f(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(c.useEffect)((function(){H(t)}),[t]);Object(Ct.a)((function(){return{text:{width:"500px",margin:"10px"},button:{backgroundColor:"white",width:"50px",margin:"10px","&:hover":{backgroundColor:"#A2EA2E"}}}}))();var G=function(e){"clickaway"!==e&&B(!1)},V=function(e){H(Object(j.a)(Object(j.a)({},M),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(n.jsxs)("form",{className:h.a.adminForm,style:a,children:[Object(n.jsx)("div",{className:"".concat(h.a.title," ").concat(h.a.awareness),children:Object(n.jsxs)(b.a,{container:!0,className:h.a.adminContent,justify:"space-between",spacing:3,children:[Object(n.jsx)(b.a,{item:!0,xs:12,children:Object(n.jsx)(w.a,{required:!0,className:"".concat(h.a.formInput),variant:"outlined",id:"standard-basic-title",label:"Title",value:M?M.title:"",onChange:V})}),Object(n.jsx)(b.a,{item:!0,xs:12,md:4,children:Object(n.jsxs)(C.a,{variant:"outlined",color:"primary",className:"".concat(h.a.formInput),children:[Object(n.jsx)(_.a,{id:"category-combobox",children:"Category"}),Object(n.jsxs)(k.a,{id:"categoryId",name:"categoryId",label:"category",labelId:"category-label",value:M?M.categoryId:"",onChange:V,children:[Object(n.jsx)(I.a,{value:null,children:"\xa0"}),Object(S.a)(p).map((function(e){return Object(n.jsx)(I.a,{value:e.id,children:e.name},e.id)}))]},"categoryId")]})}),Object(n.jsx)(b.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(w.a,{className:"".concat(h.a.formInput),variant:"outlined",id:"standard-basic-videourl",label:"Video URL",value:M?M.video:"",onChange:V})}),Object(n.jsxs)(b.a,{item:!0,xs:12,sm:6,md:4,children:[Object(n.jsx)(m.a,{className:"".concat(h.a.formInput),style:{height:"3.5rem"},variant:"outlined",size:"small",color:"primary",disableElevation:!0,onClick:function(){N(!0)},children:"Image"}),A?A.name:M?M.imageTitle:null]})]})}),Object(n.jsxs)("div",{className:ne.a.textEditor,children:[Object(n.jsx)(St.a,{open:y,onSave:function(e){z(e[0]),N(!1)},acceptedFiles:["image/jpeg","image/png","image/bmp","image/gif"],showPreviews:!0,filesLimit:1,maxFileSize:5e6,onClose:function(){N(!1)}}),Object(n.jsx)(Nt.a,{onChange:function(e){H(Object(j.a)(Object(j.a)({},M),{},{body:e}))},defaultValue:M?M.body:null,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]}]]},formats:["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","color"],placeholder:"Write content here...."}),Object(n.jsx)(te.a,{open:W,autoHideDuration:4e3,onClose:G,children:Object(n.jsx)(ie.a,{onClose:G,severity:"success",children:D})})]}),Object(n.jsxs)("div",{className:"".concat(h.a.buttons," ").concat(h.a.admin),children:[Object(n.jsxs)(m.a,{variant:"contained",color:"primary",size:"small",onClick:function(){return s(M,A)},disableElevation:!0,disabled:"loading"===i?"disabled":"",children:["create"===o&&"Create","update"===o&&"Update"]}),Object(n.jsx)(m.a,{variant:"outlined",size:"small",style:{marginLeft:16},onClick:function(){H([]),l()},disableElevation:!0,children:"Cancel"})]})]})}function kt(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)("retrieve"),o=Object(r.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)("idle"),u=Object(r.a)(l,2),j=u[0],O=u[1],p=Object(c.useState)([]),f=Object(r.a)(p,2),g=f[0],v=f[1],y=Object(c.useState)([]),w=Object(r.a)(y,2),N=(w[0],w[1]),S=Object(c.useState)([]),C=Object(r.a)(S,2),_=C[0],k=C[1],I=Object(c.useState)(""),P=Object(r.a)(I,2),E=P[0],A=P[1],z=Object(c.useState)(!1),T=Object(r.a)(z,2),F=T[0],D=T[1],L=Object(c.useState)(),q=Object(r.a)(L,2),B=q[0],R=q[1];Object(c.useEffect)((function(){U()}),[]);var U=function(){O("loading"),console.log("before load data"),at.on("value",(function(e){k(e.val())})),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list").then((function(e){N(e.data),s("retrieve"),O("success")})).catch((function(e){return console.log(e)})),console.log("after load data")},M=function(e,t){console.log("inside create"),O("loading"),console.log("selectedFile "+t),console.log("title "+e.title),console.log("selectedCategory "+e.categoryId),console.log("body "+e.body),console.log("video "+e.video),nt.ref("/images/".concat(t.name)).put(t).on((function(e){console.log(e),O("error")}),(function(){nt.ref("images").child(t.name).getDownloadURL().then((function(a){console.log("before push"),at.push({categoryId:e.categoryId,title:e.title?e.title:"",body:e.body?e.body:"",image:a,imageTitle:t.name,video:e.video?e.video:""}),console.log("after push"),A("Content uploaded successfully"),D(!0),G(),U()}))}))},H=function(e){"clickaway"!==e&&D(!1)},G=function(){v([])},V=function(e,t){console.log("inside update"),O("loading"),e&&(t?nt.refFromURL(e.image).delete().then((function(){console.log("file deleted successfully"),nt.ref("/images/".concat(t.name)).put(t).on((function(e){console.log(e),O("error")}),(function(){nt.ref("images").child(t.name).getDownloadURL().then((function(a){K(e,t,a)}))}))})):K(e,null,null))},K=function(e,t,a){console.log("key in update"),at.child("".concat(B)).set({categoryId:e.categoryId,title:e.title,body:e.body,image:a||e.image,imageTitle:t?t.name:e.imageTitle,video:e.video}),A("Content uploaded successfully"),D(!0),G(),U()};return t?Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===j?"":"hidden")}),Object(n.jsx)(te.a,{open:F,autoHideDuration:4e3,onClose:H,children:Object(n.jsx)(ie.a,{onClose:H,severity:"success",children:E})}),Object(n.jsx)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:"".concat(h.a.content," ").concat(h.a.awarenessContent),children:[Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.adminContent),children:"Content"}),Object(n.jsx)(xt,{style:{display:"retrieve"===i?"flex":"none"},postedArticle:_,setEditKey:function(e){console.log("key "+e),s("update"),R(e),at.child(e).on("value",(function(e){v(e.val())}))},isAdmin:!0,className:J.a.admin,children:Object(n.jsx)(m.a,{style:{display:"retrieve"===i?"flex":"none"},variant:"contained",size:"small",onClick:function(e){console.log("returned value "+e),s("create")},color:"primary",disableElevation:!0,children:"Add"})}),Object(n.jsx)(_t,{mode:i,status:j,style:{display:"retrieve"!==i?"flex":"none"},data:g,onSubmit:function(e,t){"create"===i&&M(e,t),"update"===i&&V(e,t)},onCancel:function(){s("retrieve"),g.title="",v([])}})]})})]}):Object(n.jsx)(d.a,{to:"/admin"})}a(413);function It(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.className,r=e.options,l=e.onChange,d=e.onFocus;return Object(n.jsx)(w.a,Object(j.a)(Object(j.a)({name:t,id:t,label:a,value:c,error:o,helperText:i,variant:"outlined",InputLabelProps:{shrink:!0},onChange:l,onFocus:d,className:s},r),{},{type:"date"}))}function Pt(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.className,r=e.options,l=e.onChange,d=e.onFocus;return Object(n.jsx)(w.a,Object(j.a)(Object(j.a)({name:t,id:t,label:a,value:c,error:o,helperText:i,variant:"outlined",InputLabelProps:{shrink:!0},onChange:l,onFocus:d,className:s},r),{},{type:"time"}))}var Et=a(216),At=a.n(Et);var zt=function(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),o=Object(r.a)(a,2),i=o[0],s=o[1],l=[{field:"id",headerName:"ID",width:70},{field:"title",headerName:"Title",width:400},{field:"eventDate",headerName:"Event Date",width:130},{field:"eventTime",headerName:"Event Time",width:130,cellClassName:function(e){return e.isCancelled?ne.a.inactive:""}},{field:"isCancelled",headerName:"Active",width:100,renderCell:function(e){return Object(n.jsx)("div",{style:{height:"100%",width:"100%"},children:e.row.isCancelled?"Cancelled":"Active"})}},{field:"actions",headerName:"Actions",sortable:!1,width:100,renderCell:function(e){return Object(n.jsxs)("div",{style:{display:"flex",height:"100%",alignItems:"center"},children:[Object(n.jsx)(de.a,{id:e.row.id,onClick:q,style:{cursor:"pointer",color:"#78787c"}}),Object(n.jsx)(At.a,{id:e.row.id,onClick:L,style:{cursor:"pointer",color:"#78787c",marginLeft:".6rem"}})]})}}],u=[{label:"Title",name:"title",required:!0,component:N,order:2},{label:"Date",name:"eventDate",required:!0,component:It,options:{className:"".concat(h.a.formInput," ").concat(h.a.col2)},order:4},{label:"Time",name:"eventTime",required:!0,component:Pt,options:{className:"".concat(h.a.formInput," ").concat(h.a.col2)},order:5},{label:"Link",name:"link",required:!0,component:N,order:1},{label:"Description",name:"description",required:!0,component:N,options:{multiline:!0,rows:4},order:3}],O=Object(c.useState)(),p=Object(r.a)(O,2),f=p[0],g=p[1],v=function(){var e={};return u.sort((function(e,t){return e.order-t.order})).forEach((function(t){e[t.name]=""})),e},y=Object(c.useState)("retrieve"),w=Object(r.a)(y,2),S=w[0],C=w[1],_=Object(c.useState)("idle"),k=Object(r.a)(_,2),I=k[0],P=k[1],E=Object(c.useState)(v),A=Object(r.a)(E,2),z=A[0],T=A[1];Object(c.useEffect)((function(){F()}),[]);var F=function(){P("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/events/list").then((function(e){e.data?i?D(e.data):x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/county/list").then((function(t){t.data&&(t.data.sort((function(e,t){return e.countyResponse>t.countyResponse?1:-1})),localStorage.setItem("countyList",JSON.stringify(t.data)),s(JSON.parse(localStorage.getItem("countyList"))),D(e.data,t.data))})).catch((function(e){return console.log(e)})):console.log(e)})).catch((function(e){return console.log(e)}))},D=function(e,t){t||(t=i);var a=e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{id:String(e.eventId),county:e.countyId&&t.find((function(t){return e.countyId===t.countyId})).county})}));console.log(a),g(a),C("retrieve"),P("success"),T(v)},L=function(e){var t=f.find((function(t){return t.id===e.currentTarget.id})).eventId;x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/events/cancel/"+t).then((function(e){"Event is cancelled successfully"===e.data?F():(console.log(e),P("error"))})).catch((function(e){console.log(e),P("error")}))},q=function(e){T(f.filter((function(t){return t.id===e.currentTarget.id}))[0]),console.log(z),C("update")},B=function(e){P("loading"),delete e.county,e.isCancelled=!1,console.log(e),x.a.post("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/events/add",e).then((function(e){"Event is created successfully"===e.data?F():(console.log(e),P("error"))})).catch((function(e){console.log(e),P("error")}))},R=function(e){P("loading"),delete e.county,delete e.id,console.log(e.eventId,e),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/events/edit/"+e.eventId,e).then((function(e){"Event is postponed successfully"===e.data?F():(console.log(e),P("error"))})).catch((function(e){console.log(e),P("error")}))},U=Object(c.useState)(!1),M=Object(r.a)(U,2),H=M[0],G=M[1],V=function(e,t){"clickaway"!==t&&P("idle")};return t?f?Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===I?"":"hidden")}),Object(n.jsxs)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:[Object(n.jsx)(te.a,{open:"success"===I,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:V,children:Object(n.jsx)(ie.a,{onClose:V,severity:"success",children:"Data successfully loaded"})}),Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:h.a.content,children:[Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.admin),children:"Events"}),Object(n.jsxs)(oe,{className:ne.a.dataGrid,style:{display:"retrieve"===S?"flex":"none"},rows:f,columns:l,onSelectionChange:function(e){var t;0===e.rowIds.length?G(!1):G(!0),t=e.rowIds,console.log(t)},disableSelectionOnClick:!0,disableColumnSelector:!0,showToolbar:!0,autoPageSize:!0,children:[Object(n.jsx)(m.a,{variant:"contained",size:"small",onClick:function(e){C("create")},color:"primary",disableElevation:!0,disabled:"loading"===I?"disabled":"",children:"Add"}),Object(n.jsx)(m.a,{variant:"text",size:"small",style:{marginLeft:16},onClick:function(e){},className:H?"":"hidden",disableElevation:!0,disabled:"loading"===I?"disabled":"",children:"Delete"})]}),Object(n.jsx)(re,{mode:S,inputItems:u,data:z,status:I,style:{display:"retrieve"!==S?"flex":"none"},onSubmit:function(e){"create"===S&&B(e),"update"===S&&R(e)},onCancel:function(){C("retrieve"),T(v)}})]})]})]}):Object(n.jsx)($.a,{className:"circularProgress",open:!f,children:Object(n.jsx)(ee.a,{color:"inherit"})}):Object(n.jsx)(d.a,{to:"/admin"})};var Tt=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),t=Object(r.a)(e,2),a=t[0],o=t[1];return Object(c.useEffect)((function(){a||x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/county/list").then((function(e){e.data&&(e.data.sort((function(e,t){return e.county>t.county?1:-1})),localStorage.setItem("countyList",JSON.stringify(e.data)),o(JSON.parse(localStorage.getItem("countyList"))))})).catch((function(e){return console.log(e)}))}),[a]),Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(l.a,{children:Object(n.jsxs)(d.d,{children:[Object(n.jsxs)(d.b,{exact:!0,path:"/awareness",children:[Object(n.jsx)($e,{}),Object(n.jsx)(ft,{})]}),Object(n.jsx)(d.b,{exact:!0,path:"/signup",children:Object(n.jsx)(R,{})}),Object(n.jsx)(d.b,{exact:!0,path:"/signin",children:Object(n.jsx)(U,{})}),Object(n.jsxs)(d.b,{exact:!0,path:"/profile",children:[Object(n.jsx)($e,{}),Object(n.jsx)(_e,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/updates",children:[Object(n.jsx)($e,{}),Object(n.jsx)(Q,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/find-water",children:[Object(n.jsx)($e,{}),Object(n.jsx)(De,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/awareness-category",children:[Object(n.jsx)(ge,{}),Object(n.jsx)(yt,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/awareness-content",children:[Object(n.jsx)(ge,{}),Object(n.jsx)(kt,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/users",children:[Object(n.jsx)(ge,{}),Object(n.jsx)(se,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/water-stations",children:[Object(n.jsx)(ge,{}),Object(n.jsx)(ue,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/events",children:[Object(n.jsx)(ge,{}),Object(n.jsx)(zt,{})]}),Object(n.jsx)(d.b,{exact:!0,path:"/admin",children:Object(n.jsx)(Z,{})}),Object(n.jsx)(d.b,{path:"/",children:Object(n.jsx)(et,{})})]})})})},Ft=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,500)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),o(e),i(e)}))};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(Tt,{})}),document.getElementById("root")),Ft()},9:function(e,t,a){e.exports={container:"Form_container__2WtlN",profile:"Form_profile__3qCoo",admin:"Form_admin__21k3F",content:"Form_content__1Rv4U",title:"Form_title__3G1am",awareness:"Form_awareness__1bQEh",adminContent:"Form_adminContent__2nO7M",subtitle:"Form_subtitle__3rHUl",confirmation:"Form_confirmation__2Lcs9",signInForm:"Form_signInForm__1PAMX",profileForm:"Form_profileForm__3_nWQ",adminForm:"Form_adminForm__2mOLX",formInput:"Form_formInput__2ZKPV",landingForm:"Form_landingForm__1euFz",actions:"Form_actions__8LmcS",link:"Form_link__vav7t",col2:"Form_col2__3013V",col3:"Form_col3__2XpXq",last:"Form_last__1nPx3",buttons:"Form_buttons__2kaBU",contentBox:"Form_contentBox__3X8e6",border:"Form_border__1yFbE",userBox:"Form_userBox__2e3dI",subscriptionBox:"Form_subscriptionBox__hmJ_S",deleteBox:"Form_deleteBox__3ezyc"}}},[[414,1,2]]]);
//# sourceMappingURL=main.26ff105a.chunk.js.map