(this["webpackJsonpmore-clean-water"]=this["webpackJsonpmore-clean-water"]||[]).push([[0],{145:function(e,t,a){},22:function(e,t,a){e.exports={container:"Cards_container__3GIVR",root:"Cards_root__2HafK",updateRoot:"Cards_updateRoot__1yfPW",updateContent:"Cards_updateContent__3giI4",updateTitle:"Cards_updateTitle__WTpVQ",updateDescription:"Cards_updateDescription__35Sqe",dismissButton:"Cards_dismissButton__3MOD4",header:"Cards_header__2Y4ge",content:"Cards_content__1vgyn",mediaArea:"Cards_mediaArea__sd2z_",viewContent:"Cards_viewContent__-Vx1x",admin:"Cards_admin__1acgD",awarenessContent:"Cards_awarenessContent__1eDSA",containerModal:"Cards_containerModal__1EhYD",contentModal:"Cards_contentModal__2Ua6y",text:"Cards_text__279rP",backButton:"Cards_backButton__2eaWq"}},26:function(e,t,a){e.exports={container:"Admin_container__1XN1b",dataGrid:"Admin_dataGrid__2djKt",textEditor:"Admin_textEditor__3Myol",editForm:"Admin_editForm__1_4TT",content:"Admin_content__g4muY",menuList:"Admin_menuList__uqoyD",menuItem__nested:"Admin_menuItem__nested__3R2KA",idLabel:"Admin_idLabel__3jUKu",inactive:"Admin_inactive__E9ca_"}},274:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){},415:function(e,t,a){},416:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),o=a.n(c),i=a(18),s=a.n(i),r=a(6),l=a(21),d=a(28),u=a(33),j=a(12),b=a(480),m=a(89),O=a(9),h=a.n(O),p=a(16),x=a.n(p),f=a(123),g=a.n(f),v=a(66),y=a.n(v),w=a(221);var N=function(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.variant,r=e.color,l=e.options,d=e.className,u=e.onChange,b=e.onFocus;return Object(n.jsx)(w.a,Object(j.a)(Object(j.a)({autoComplete:"on",name:t,id:t,label:a,value:c,error:o,helperText:i,variant:s||"outlined",color:r||"primary",className:d},l),{},{onChange:u,onFocus:b}))},S=a(32),C=a(87),_=a(134),k=a(132),I=a(78),z=a(201),P=a.n(z),E=a(424);var F=function(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.variant,r=e.color,l=e.options,d=e.className,u=e.dataProvider,b=e.onChange,m=e.onFocus;return Object(n.jsxs)(C.a,{variant:s||"outlined",color:r||"primary",className:d,error:o,children:[!u&&Object(n.jsx)(P.a,{className:"loading absolute",style:{right:"-2.5rem",top:".8rem"}}),Object(n.jsx)(_.a,{id:"".concat(t,"-label"),children:a}),Object(n.jsxs)(k.a,Object(j.a)(Object(j.a)({id:t,name:t,label:a,labelId:"".concat(t,"-label"),value:c},l),{},{onChange:b,onFocus:m,children:[Object(n.jsx)(I.a,{value:null,children:"\xa0"}),Object(S.a)(u).map((function(e){return Object(n.jsx)(I.a,{value:e.countyId,children:e.county},e.countyId)}))]})),Object(n.jsx)(E.a,{children:i})]})},A=a(224),D=a(426);var T=function(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.color,r=e.options,l=e.className,d=e.onChange;return Object(n.jsxs)("div",{className:l,children:[Object(n.jsx)(D.a,{name:t,id:t,control:Object(n.jsx)(A.a,Object(j.a)(Object(j.a)({checked:c,color:s||"primary"},r),{},{onChange:d})),label:a,error:o}),Object(n.jsx)(E.a,{children:i})]})},L={value:""},q={errors:{},isValidated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=!0,c=t.filter((function(e){return e.required&&e.step===a})),o=Object(j.a)({},this.errors);return c.forEach((function(t){o[t.name]="",e[t.name]||(o[t.name]="Ops! This field is required",n=!1)})),e.confirmPassword&&""!==e.password&&""!==e.confirmPassword&&(e.password!==e.confirmPassword?(o.password="Ops, passwords don't match",o.confirmPassword="Ops, passwords don't match",n=!1):(o.password="",o.confirmPassword="")),e.email&&!/\S+@\S+\.\S+/.test(e.email)?(o.email="Ops, invalid email detected",n=!1):o.email="",this.errors=Object(j.a)(Object(j.a)({},this.errors),o),[n,this.errors]}},W=a(481);a(274);function B(){return Object(n.jsx)("div",{className:"ocean-wrapper",children:Object(n.jsxs)("div",{className:"ocean",children:[Object(n.jsx)("div",{className:"wave"}),Object(n.jsx)("div",{className:"wave"})]})})}var U=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),t=Object(r.a)(e,1)[0],a=Object(c.useState)({userName:"",postcode:"",countyId:"",firstName:"",lastName:"",password:"",confirmPassword:"",email:L.value,isSubscriber:""}),o=Object(r.a)(a,2),i=o[0],s=o[1],O=Object(c.useState)("idle"),p=Object(r.a)(O,2),f=p[0],v=p[1],w=[{label:"Email",name:"email",required:!0,component:N,options:{autoComplete:"off"},step:0},{label:"Username",name:"userName",required:!0,component:N,step:0},{label:"Password",name:"password",required:!0,component:N,options:{type:"password"},step:0},{label:"Confirm Password",name:"confirmPassword",required:!0,component:N,options:{type:"password"},step:0},{label:"First Name",name:"firstName",required:!0,component:N,step:1},{label:"Last Name",name:"lastName",required:!0,component:N,step:1},{label:"County",name:"countyId",required:!0,component:F,dataProvider:t,step:1},{label:"Post Code",name:"postcode",required:!0,component:N,step:1},{label:"Receive water alerts?",name:"isSubscriber",required:!1,component:T,step:1}],S=Object(c.useState)({}),C=Object(r.a)(S,2),_=C[0],k=C[1],I=function(e){return k(q.isValidated(i,w))},z=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;s(Object(j.a)(Object(j.a)({},i),{},Object(u.a)({},e.target.name,t)))},P=Object(c.useState)(0),E=Object(r.a)(P,2),A=E[0],D=E[1],U=function(){var e=Object(j.a)({},i);delete e.confirmPassword,v("loading"),x.a.post("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/add",e).then((function(t){"User is created successfully"===t.data?x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/login",{userName:e.userName,password:e.password}).then((function(e){"Invalid email or password"!==e&&localStorage.setItem("userId",e.data),v("success")})).catch((function(e){console.log(e),v("error")})):v("error")})).catch((function(e){console.log(e),v("error")}))};return"success"===f?Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"fullHeight",children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(g.a,{color:"primary",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Woo hoo!"}),Object(n.jsxs)("p",{style:{lineHeight:1.5},children:["Welcome! ",Object(n.jsx)("br",{})," You account has been created"]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,component:l.c,to:"/find-water",style:{marginTop:"1rem"},children:"GO TO APP"})})]})}):localStorage.getItem("userId")?Object(n.jsx)(d.a,{to:"/find-water"}):Object(n.jsxs)(b.a,{container:!0,justify:"center",className:h.a.container,children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===f?"":"hidden")}),Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"full-height ".concat("error"===f?"":"hidden"),children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{className:"alertColor",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Uh oh!"}),Object(n.jsxs)("p",{style:{lineHeight:1.5},children:["Something weird happened. ",Object(n.jsx)("br",{})," Keep calm and try again."]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",disableElevation:!0,onClick:function(e){return v("idle")},style:{marginTop:"1rem"},children:"BACK"})})]})}),Object(n.jsxs)(b.a,{item:!0,xs:11,md:5,className:h.a.content,children:[Object(n.jsx)(B,{}),Object(n.jsx)("h2",{className:h.a.title,children:"User registration"}),Object(n.jsx)("p",{className:h.a.subtitle}),Object(n.jsxs)("form",{children:[Object(n.jsxs)("ul",{children:[["Account details","Local information"].map((function(e,t){return Object(n.jsx)("li",{className:A===t?" active-flex":"",children:w.filter((function(e){return e.step===t})).map((function(e){var t=e.component;return Object(n.jsx)(t,{id:e.name,name:e.name,label:e.label,value:i[e.name],error:_[e.name]?"error":"",helperText:_[e.name],className:h.a.formInput,options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:z,onFocus:I},e.name)}))},t)})),Object(n.jsx)("li",{className:2===A?" active-flex":"",children:Object(n.jsxs)("ul",{className:h.a.confirmation,children:[Object(n.jsxs)("li",{children:["Username: ",i.userName]}),Object(n.jsxs)("li",{children:["Email: ",i.email]}),Object(n.jsxs)("li",{children:["Password: ",i.password?i.password.split("").map((function(e){return"\u2022"})):""]}),Object(n.jsxs)("li",{children:["First name: ",i.firstName]}),Object(n.jsxs)("li",{children:["Last Name: ",i.lastName]}),Object(n.jsxs)("li",{children:["Receive water alerts? ",i.isSubscriber?"Yes":"No"]}),Object(n.jsxs)("li",{children:["County: ",t&&i.countyId?t.find((function(e){return e.countyId===i.countyId})).county:""]}),Object(n.jsxs)("li",{children:["Post code: ",i.postcode]})]})})]}),Object(n.jsxs)("div",{className:h.a.buttons,children:[0===A?"":Object(n.jsx)(m.a,{variant:"text",color:"primary",disableElevation:!0,onClick:function(e){return D(A>0?A-1:A)},disabled:"loading"===f?"disabled":"",children:"Previous"}),A<2?Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(i,w,A),a=Object(r.a)(t,2),n=a[0],c=a[1];return k(c),n?D(A<2?A+1:2):n},children:"Next"}):"",A<2?"":Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(i,w),a=Object(r.a)(t,2),n=a[0],c=a[1];return k(c),n?U():n},disabled:"loading"===f?"disabled":"",children:"Submit"})]})]})]})]})};a(145);var M=function(){var e=Object(c.useState)({userName:"",password:""}),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)("idle"),s=Object(r.a)(i,2),O=s[0],p=s[1],f=[{label:"Username",name:"userName",required:!0,component:N},{label:"Password",name:"password",required:!0,component:N,options:{type:"password"}}],g=Object(c.useState)({}),v=Object(r.a)(g,2),w=v[0],S=v[1],C=function(e){return S(q.isValidated(a,f))},_=function(e){return o(Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},e.target.name,e.target.value)))},k=function(){p("loading"),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/login",a).then((function(e){console.log(e.data),"Invalid email or password"===e.data?p("error"):(localStorage.setItem("userId",e.data),p("success"))})).catch((function(e){console.log(e),p("error")}))};return"success"===O?Object(n.jsx)(d.a,{push:!0,to:"/find-water"}):Object(n.jsxs)(b.a,{justify:"center",className:"".concat(h.a.container),children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===O?"":"hidden")}),Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"full-height ".concat("error"===O?"":"hidden"),children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{className:"alertColor",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Uh oh!"}),Object(n.jsxs)("p",{children:["Invalid email or password. ",Object(n.jsx)("br",{})," Please try again."]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",disableElevation:!0,onClick:function(e){return p("idle")},style:{marginTop:"1rem"},children:"BACK"})})]})}),Object(n.jsxs)(b.a,{item:!0,xs:11,md:5,className:"".concat(h.a.content," ").concat("error"===O?"hidden":""),children:[Object(n.jsx)(B,{}),Object(n.jsx)("h2",{className:h.a.title,children:"Sign in"}),Object(n.jsxs)("form",{className:h.a.signInForm,children:[f.map((function(e){var t=e.component;return Object(n.jsx)(t,{id:e.name,name:e.name,label:e.label,value:a[e.name],error:w[e.name]?"error":"",helperText:w[e.name],className:h.a.formInput,options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:_,onFocus:C})})),Object(n.jsx)("p",{style:{fontSize:".75rem",margin:"-.85rem 0 1.5rem"},children:"Forgot password?"}),Object(n.jsxs)("div",{className:h.a.buttons,children:[Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(a,f),n=Object(r.a)(t,2),c=n[0],o=n[1];return S(o),c?k():c},disabled:"loading"===O?"disabled":"",children:"Submit"}),Object(n.jsxs)("div",{className:h.a.actions,children:[Object(n.jsx)("p",{children:"Don't have an account yet?"}),Object(n.jsx)(m.a,{variant:"outlined",color:"primary",disableElevation:!0,component:l.c,to:"/signup",disabled:"loading"===O?"disabled":"",children:"Sign Up"}),Object(n.jsx)(l.c,{to:"/find-water",className:"enter",children:Object(n.jsx)("p",{children:"Or proceed without sign up"})})]})]})]})]})]})},R=a(482),H=a(483),V=a(50),J=a(484),K=(a(278),a(22)),G=a.n(K);var Y=function(e){var t=e.id,a=e.title,c=e.description,o=e.markAsRead;return Object(n.jsxs)(R.a,{className:G.a.updateRoot,children:[Object(n.jsxs)(H.a,{className:G.a.updateContent,children:[Object(n.jsx)(V.a,{className:G.a.updateTitle,gutterBottom:!0,children:a+" alert"}),Object(n.jsx)(V.a,{className:G.a.updateDescription,children:c})]}),Object(n.jsx)(J.a,{onClick:function(e){o(t)},style:{position:"relative"},children:Object(n.jsx)(m.a,{size:"small",className:G.a.dismissButton,children:"Dismiss"})})]})};var X=function(){var e=Object(c.useState)(localStorage.getItem("userId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)([]),o=Object(r.a)(a,2),i=o[0],s=o[1],d=Object(c.useState)("idle"),u=Object(r.a)(d,2),O=u[0],h=u[1],p=[{type:"shortage",title:"Water shortage",description:"A Water shortage was detected in your area"},{type:"dirty",title:"Dirty water",description:"Dirty water sources was detected in your area"}];Object(c.useEffect)((function(){f()}),[]);var f=function(){h("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/alert/"+t).then((function(e){if(e.data){var t=e.data.map((function(e,t){return Object(j.a)(Object(j.a)({},e),{},{id:String(t),title:p.find((function(t){return t.type===e.alertType})).title,description:p.find((function(t){return t.type===e.alertType})).description})}));s(t),h("idle")}else h("error"),console.log(e.data)})).catch((function(e){h("error"),console.log(e)}))},g=function(e){var t=Object(S.a)(i);t[i.findIndex((function(t){return t.alert_id===e}))].isRead=!0,s(t)},v=i.filter((function(e){return!e.isRead}));return t?Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===O?"":"hidden")}),Object(n.jsx)("ul",{className:"updates-list",children:v.map((function(e){return Object(n.jsx)(Y,{id:e.alert_id,title:e.title,description:e.description,markAsRead:g},e.id)}))}),Object(n.jsx)("div",{className:"total",children:v.length>0?"Total updates: ".concat(v.length):Object(n.jsx)(b.a,{className:"fullHeightMobile no-items",container:!0,justify:"center",alignItems:"center",children:Object(n.jsx)("h3",{children:"Hooray! No updates!"})})})]}):Object(n.jsx)(b.a,{className:"updatesNotSigned no-items",container:!0,justify:"center",alignItems:"center",children:Object(n.jsxs)(b.a,{container:!0,className:"content",xs:10,md:12,children:[Object(n.jsx)("h2",{style:{margin:0},children:"Sign up now"}),Object(n.jsx)("p",{style:{textAlign:"center",padding:"0 4rem"},children:"And receive water alerts directly in your device"}),Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,component:l.c,to:"/signup",style:{margin:"1rem 0"},children:"Sign Up"}),Object(n.jsx)("p",{children:"Are you already registered?"}),Object(n.jsx)(m.a,{variant:"text",color:"primary",disableElevation:!0,component:l.c,to:"/signin",children:"Sign in"})]})})};a(279);var Q=function(){return Object(n.jsx)(b.a,{container:!0,justify:"center",className:"updates fullHeight",children:Object(n.jsx)(b.a,{item:!0,xs:12,children:Object(n.jsx)(X,{})})})},Z=a(430),$=a(428),ee=a(486),te=a(26),ae=a.n(te),ne=a(124);var ce=function(e){var t=e.style;return Object(n.jsxs)("div",{style:t,className:ae.a.dataGrid,children:[Object(n.jsx)("div",{className:ae.a.content,children:Object(n.jsx)(ne.a,Object(j.a)(Object(j.a)({},e),{},{className:"",style:{}}))}),Object(n.jsx)("div",{className:ae.a.buttons,children:e.children})]})},oe=a(499);var ie=function(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),o=Object(r.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)(),u=Object(r.a)(l,2),m=u[0],O=u[1];Object(c.useEffect)((function(){p()}),[]);var p=function(){w("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/list").then((function(e){e.data?i?f(e.data):x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/county/list").then((function(t){t.data&&(t.data.sort((function(e,t){return e.countyResponse>t.countyResponse?1:-1})),localStorage.setItem("countyList",JSON.stringify(t.data)),s(JSON.parse(localStorage.getItem("countyList"))),f(e.data,t.data))})).catch((function(e){return console.log(e)})):console.log(e)})).catch((function(e){return console.log(e)}))},f=function(e,t){t||(t=i);var a=e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{id:String(e.userId),county:e.countyId&&t.find((function(t){return e.countyId===t.countyId})).county})}));O(a),w("success")},g=Object(c.useState)("idle"),v=Object(r.a)(g,2),y=v[0],w=v[1];return t?m?Object(n.jsxs)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:[Object(n.jsx)(ee.a,{open:"success"===y,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:function(e,t){"clickaway"!==t&&w("idle")},children:Object(n.jsx)(oe.a,{severity:"success",children:"Data successfully loaded"})}),Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:h.a.content,children:[Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.admin),children:"Users"}),Object(n.jsx)(ce,{className:ae.a.dataGrid,rows:m,columns:[{field:"userId",headerName:"ID",width:70},{field:"userName",headerName:"Username",width:140},{field:"firstName",headerName:"First name",width:130},{field:"lastName",headerName:"Last name",width:130},{field:"email",headerName:"Email",width:200},{field:"county",headerName:"County",width:160},{field:"postcode",headerName:"Post code",width:120}],disableColumnSelector:!0,disableSelectionOnClick:!0,showToolbar:!0,autoPageSize:!0})]})]}):Object(n.jsx)(Z.a,{className:"circularProgress",open:!m,children:Object(n.jsx)($.a,{color:"inherit"})}):Object(n.jsx)(d.a,{to:"/admin"})};var se=function(e){var t=e.mode,a=e.inputItems,o=e.data,i=e.status,s=e.variant,l=e.style,d=e.onSubmit,b=e.onCancel,O=Object(c.useState)(o),p=Object(r.a)(O,2),x=p[0],f=p[1];Object(c.useEffect)((function(){f(o)}),[o]);var g=Object(c.useState)({}),v=Object(r.a)(g,2),y=v[0],w=v[1],N=function(e){return w(q.isValidated(x,a))},S=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;f(Object(j.a)(Object(j.a)({},x),{},Object(u.a)({},e.target.name,t))),console.log(x)};return Object(n.jsxs)("form",{className:h.a.adminForm,style:l,children:[Object(n.jsx)("div",{style:{flexGrow:1},children:a.map((function(e,t){var a=e.component;return Object(n.jsx)(a,{id:e.name,name:e.name,label:e.label,value:x[e.name]?x[e.name]:"",error:y[e.name]?"error":"",helperText:y[e.name],className:h.a.formInput,style:{style:l},variant:s||"outlined",options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:S,onFocus:N},e.name)}))}),Object(n.jsxs)("div",{className:"".concat(h.a.buttons," ").concat(h.a.admin),children:[Object(n.jsxs)(m.a,{variant:"contained",color:"primary",size:"small",onClick:function(e){var t=q.isValidated(x,a),n=Object(r.a)(t,2),c=n[0],o=n[1];return w(o),c?d(x):c},disableElevation:!0,disabled:"loading"===i?"disabled":"",children:["create"===t&&"Create","update"===t&&"Update"]}),Object(n.jsx)(m.a,{variant:"outlined",size:"small",style:{marginLeft:16},onClick:function(e){b()},disableElevation:!0,disabled:"loading"===i?"disabled":"",children:"Cancel"})]})]})},re=a(125),le=a.n(re);var de=function(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),o=Object(r.a)(a,2),i=o[0],s=o[1],l=[{field:"stationId",headerName:"ID",width:70,cellClassName:function(e){return e.row.isWorking?"":ae.a.inactive}},{field:"county",headerName:"County",width:270,cellClassName:function(e){return e.row.isWorking?"":ae.a.inactive}},{field:"postcode",headerName:"Post Code",width:150,cellClassName:function(e){return e.row.isWorking?"":ae.a.inactive}},{field:"size",headerName:"Size",width:100,cellClassName:function(e){return e.row.isWorking?"":ae.a.inactive}},{field:"capacity",headerName:"Capacity",width:100,cellClassName:function(e){return e.row.isWorking?"":ae.a.inactive}},{field:"isWorking",headerName:"Active?",width:100,cellClassName:function(e){return e.row.isWorking?"":ae.a.inactive},renderCell:function(e){return Object(n.jsx)("div",{style:{height:"100%",width:"100%",textAlign:"center"},id:e.row.id,onChange:B,className:e.row.isWorking&&String(e.row.isWorking),children:Object(n.jsx)(T,{value:e.row.isWorking})})}},{field:"actions",headerName:"Actions",sortable:!1,width:100,flex:1,cellClassName:function(e){return e.row.isWorking?"":ae.a.inactive},renderCell:function(e){return Object(n.jsx)("div",{style:{display:"flex",height:"100%",alignItems:"center"},children:Object(n.jsx)(le.a,{id:e.row.id,onClick:U,style:{cursor:"pointer",color:"#78787c",marginLeft:".2rem"}})})}}],u=[{label:"County",name:"countyId",required:!0,component:F,dataProvider:i},{label:"Post Code",name:"postcode",required:!0,component:N},{label:"Size",name:"size",required:!0,component:N,options:{className:"".concat(h.a.formInput," ").concat(h.a.col2)}},{label:"Capacity",name:"capacity",required:!0,component:N,options:{className:"".concat(h.a.formInput," ").concat(h.a.col2)}}],O=Object(c.useState)(),p=Object(r.a)(O,2),f=p[0],g=p[1],v=function(){var e={};return u.sort((function(e,t){return e.order-t.order})).forEach((function(t){e[t.name]=""})),e},y=Object(c.useState)("retrieve"),w=Object(r.a)(y,2),S=w[0],C=w[1],_=Object(c.useState)("idle"),k=Object(r.a)(_,2),I=k[0],z=k[1],P=Object(c.useState)(v),E=Object(r.a)(P,2),A=E[0],D=E[1];Object(c.useEffect)((function(){L()}),[]);var L=function(){z("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/list").then((function(e){e.data?i?q(e.data):x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/county/list").then((function(t){t.data&&(t.data.sort((function(e,t){return e.countyResponse>t.countyResponse?1:-1})),localStorage.setItem("countyList",JSON.stringify(t.data)),s(JSON.parse(localStorage.getItem("countyList"))),q(e.data,t.data))})).catch((function(e){return console.log(e)})):console.log(e)})).catch((function(e){return console.log(e)}))},q=function(e,t){t||(t=i);var a=e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{id:String(e.stationId),county:e.countyId&&t.find((function(t){return e.countyId===t.countyId})).county})}));g(a),C("retrieve"),z("success"),D(v)},B=function(e){z("loading");var t=f.find((function(t){return t.id===e.currentTarget.id})).stationId,a=Boolean(e.currentTarget.className)?"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/delete/"+t:"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/activate/"+t;x.a.get(a).then((function(e){e.data,L()})).catch((function(e){console.log(e),z("error")}))},U=function(e){D(f.filter((function(t){return t.id===e.currentTarget.id}))[0]),C("update")},M=function(e){z("loading"),delete e.additionalInfo,console.log(e),x.a.post("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/add",e).then((function(e){"Stations is created successfully"===e.data?L():(console.log(e),z("error"))})).catch((function(e){console.log(e),z("error")}))},R=function(e){z("loading"),delete e.additionalInfo,delete e.id,delete e.county,delete e.installDate,delete e.installationDate,delete e.postcodeId,delete e.isWorking,console.log(e),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/edit/"+e.stationId,e).then((function(e){"Station is updated successfully"===e.data?L():(console.log(e),z("error"))})).catch((function(e){console.log(e),z("error")}))},H=Object(c.useState)(!1),V=Object(r.a)(H,2),J=V[0],K=V[1],G=function(e,t){"clickaway"!==t&&z("idle")};return t?f?Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===I?"":"hidden")}),Object(n.jsx)(ee.a,{open:"success"===I,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:G,children:Object(n.jsx)(oe.a,{onClose:G,severity:"success",children:"Data successfully loaded"})}),Object(n.jsx)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:h.a.content,children:[Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.admin),children:"Water Stations"}),Object(n.jsxs)(ce,{style:{display:"retrieve"===S?"flex":"none"},rows:f,columns:l,onSelectionChange:function(e){var t;0===e.rowIds.length?K(!1):K(!0),t=e.rowIds,console.log(t)},disableSelectionOnClick:!0,disableColumnSelector:!0,showToolbar:!0,autoPageSize:!0,children:[Object(n.jsx)(m.a,{variant:"contained",size:"small",onClick:function(e){C("create")},color:"primary",disableElevation:!0,disabled:"loading"===I?"disabled":"",children:"Add"}),Object(n.jsx)(m.a,{variant:"text",size:"small",style:{marginLeft:16},onClick:function(e){},className:J?"":"hidden",disableElevation:!0,disabled:"loading"===I?"disabled":"",children:"Delete"})]}),Object(n.jsx)(se,{mode:S,inputItems:u,data:A,status:I,style:{display:"retrieve"!==S?"flex":"none"},onSubmit:function(e){"create"===S&&M(e),"update"===S&&R(e)},onCancel:function(){C("retrieve"),D(v)}})]})})]}):Object(n.jsx)(Z.a,{className:"circularProgress",open:!f,children:Object(n.jsx)($.a,{color:"inherit"})}):Object(n.jsx)(d.a,{to:"/admin"})},ue=a(500),je=a(79),be=a(423),me=a(488),Oe=a(425),he=a(487),pe=a(203),xe=a.n(pe),fe=a(86);a(417),a(280),a(282);fe.a.initializeApp({apiKey:"AIzaSyCUFjz6GWSpfjTNMrB3DTMcCY1RfUg2qzY",authDomain:"awarenesscontent.firebaseapp.com",projectId:"awarenesscontent",storageBucket:"awarenesscontent.appspot.com",messagingSenderId:"485810474234",appId:"1:485810474234:web:1cc85ab2cf326a26164d43"});var ge=fe.a.database().ref("/article"),ve=fe.a.storage(),ye=fe.a.auth();var we=function(){var e=o.a.useState(!1),t=Object(r.a)(e,2),a=t[0],i=t[1],s=Object(c.useState)("idle"),u=Object(r.a)(s,2),j=u[0],b=u[1],m=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&i(e)}};return"logout"===j?Object(n.jsx)(d.a,{to:"/admin"}):Object(n.jsxs)(o.a.Fragment,{children:[Object(n.jsx)(je.a,{color:"inherit","aria-label":"open drawer",onClick:m(!0),className:"absolute",children:Object(n.jsx)(xe.a,{})}),Object(n.jsx)(ue.a,{anchor:"left",open:a,onClose:m(!1),onOpen:m(!0),children:Object(n.jsx)("div",{className:ae.a.menuList,role:"presentation",onClick:m(!1),onKeyDown:m(!1),children:Object(n.jsxs)(be.a,{children:[Object(n.jsx)(Oe.a,{button:!0,component:l.c,to:"/admin/users",children:Object(n.jsx)(he.a,{primary:"Users"})}),Object(n.jsx)(Oe.a,{button:!0,component:l.c,to:"/admin/water-stations",children:Object(n.jsx)(he.a,{primary:"Water Stations"})}),Object(n.jsx)(Oe.a,{children:Object(n.jsx)(he.a,{primary:"Awareness"})}),Object(n.jsx)(Oe.a,{button:!0,component:l.c,to:"/admin/awareness-category",children:Object(n.jsx)(he.a,{primary:"Categories",className:ae.a.menuItem__nested})}),Object(n.jsx)(Oe.a,{button:!0,component:l.c,to:"/admin/awareness-content",children:Object(n.jsx)(he.a,{primary:"Content",className:ae.a.menuItem__nested})}),Object(n.jsx)(Oe.a,{button:!0,component:l.c,to:"/admin/events",children:Object(n.jsx)(he.a,{primary:"Events"})}),Object(n.jsx)(me.a,{}),Object(n.jsx)(Oe.a,{button:!0,onClick:function(e){localStorage.removeItem("adminId"),ye.signOut(),b("logout")},children:Object(n.jsx)(he.a,{primary:"Logout"})})]})})})]},"left")},Ne=a(489),Se=a(490),Ce=a(491),_e=a(492),ke=a(493),Ie=a(435);var ze=function(){var e=Object(c.useState)(),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)("idle"),s=Object(r.a)(i,2),l=s[0],O=s[1],p=Object(c.useState)(localStorage.getItem("userId")),f=Object(r.a)(p,1)[0],g=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),v=Object(r.a)(g,1)[0],w=[{label:"Email",name:"email",required:!0,component:N},{label:"First Name",name:"firstName",required:!0,component:N},{label:"Last Name",name:"lastName",required:!0,component:N},{label:"County",name:"countyId",required:!0,type:"combobox",component:F,dataProvider:v},{label:"Post Code",name:"postcode",required:!0,component:N}];Object(c.useEffect)((function(){S()}),[]);var S=function(){O("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/"+f).then((function(e){if(e.data){var t={};w.map((function(e){return e.name})).forEach((function(a){return t[a]=e.data[0][a]})),t.isSubscriber=e.data[0].isSubscriber,o(t),O("idle")}else console.log(e.data),O("error")})).catch((function(e){O("error"),console.log(e)}))},C=Object(c.useState)({}),_=Object(r.a)(C,2),k=_[0],I=_[1],z=function(e){return I(q.isValidated(a,w))},P=function(e){return o(Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},e.target.name,e.target.value)))},E=function(e){O("loading"),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/edit/"+f,a).then((function(e){console.log(e),"User is updated successfully"===e.data?O("success"):O("error")})).catch((function(e){console.log(e),O("error")}))},A=function(e,t){"clickaway"!==t&&O("idle")},D=Object(c.useState)(!1),L=Object(r.a)(D,2),B=L[0],U=L[1],M=function(){"deleted"!==l&&U(!1)};return f?a?(console.log(l),Object(n.jsxs)(b.a,{justify:"center",className:"".concat(h.a.container," ").concat(h.a.profile),children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===l?"":"hidden")}),Object(n.jsxs)(Ne.a,{open:B,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(Se.a,{id:"alert-dialog-title",children:"Confirm account delete"}),Object(n.jsx)(Ce.a,{children:Object(n.jsx)(_e.a,{id:"alert-dialog-description",children:"This will delete your account permanently. Are you sure you want to proceed?"})}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(m.a,{onClick:function(e){O("loading"),x.a.delete("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/deactivate/"+f).then((function(e){"User is deleted successfully"===e.data?(O("deleted"),setTimeout((function(){localStorage.removeItem("userId"),O("idle")}),2e3)):(console.log(e),O("error"))})).catch((function(e){console.log(e),O("error")}))},color:"primary",children:"Yes"}),Object(n.jsx)(m.a,{onClick:M,color:"primary",autoFocus:!0,variant:"contained",disableElevation:!0,children:"No"})]})]}),Object(n.jsx)(b.a,{container:!0,alignContent:"center",justify:"center",className:"full-height ".concat("error"===l?"":"hidden"),children:Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(y.a,{className:"alertColor",style:{fontSize:"5rem"}}),Object(n.jsx)("h2",{style:{margin:0},children:"Uh oh!"}),Object(n.jsxs)("p",{children:["Something weird happened. ",Object(n.jsx)("br",{})," Please try again later."]}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{variant:"contained",disableElevation:!0,onClick:function(e){return O("idle")},style:{marginTop:"1rem"},children:"BACK"})})]})}),Object(n.jsxs)(b.a,{item:!0,xs:11,md:8,className:"".concat(h.a.content," ").concat("error"!==l?"":"hidden"),children:[Object(n.jsx)(ee.a,{open:"success"===l||"deleted"===l,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:A,children:Object(n.jsx)(oe.a,{onClose:A,severity:"success",children:"success"===l?"Profile updated successfully!":"Profile deleted successfully."})}),Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.profile),children:"Profile Manager"}),Object(n.jsxs)("form",{className:h.a.profileForm,children:[Object(n.jsxs)("div",{className:"".concat(h.a.contentBox," ").concat(h.a.userBox),children:[Object(n.jsx)(Ie.a,{notched:!0,disabled:!0,label:"User information",className:h.a.border}),Object(n.jsx)("h4",{children:"User information"}),w.map((function(e){var t=e.component;return Object(n.jsx)(t,{id:e.name,name:e.name,label:e.label,value:a[e.name],error:k[e.name]?"error":"",helperText:k[e.name],className:h.a.formInput,options:e.options?e.options:"",dataProvider:e.dataProvider?e.dataProvider:"",onChange:P,onFocus:z})})),Object(n.jsx)("div",{className:"".concat(h.a.buttons," ").concat(h.a.profile),children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){var t=q.isValidated(a,w),n=Object(r.a)(t,2),c=n[0],o=n[1];return I(o),c?E():c},disabled:"loading"===l?"disabled":"",children:"Submit"})})]}),Object(n.jsxs)("div",{className:"".concat(h.a.contentBox," ").concat(h.a.subscriptionBox),children:[Object(n.jsx)(Ie.a,{notched:!0,disabled:!0,label:"Manage subscription",className:h.a.border}),Object(n.jsx)("h4",{children:"Manage subscription"}),Object(n.jsx)("div",{onChange:function(e){O("loading");var t=Boolean(e.currentTarget.className)?"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/unsubscribe/"+f:"https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/users/subscribe/"+f;x.a.put(t).then((function(e){e.data,O("success"),o(Object(j.a)(Object(j.a)({},a),{},{isSubscriber:!a.isSubscriber}))})).catch((function(e){console.log(e),O("error")}))},className:a.isSubscriber&&String(a.isSubscriber),children:Object(n.jsx)(T,{value:a.isSubscriber,label:"Receive water alerts?",disabled:"loading"===l?"disabled":""})})]}),Object(n.jsxs)("div",{className:"".concat(h.a.contentBox," ").concat(h.a.deleteBox),children:[Object(n.jsx)(Ie.a,{notched:!0,disabled:!0,label:"Danger zone",className:h.a.border}),Object(n.jsx)("h4",{children:"Danger zone"}),Object(n.jsx)(m.a,{variant:"outlined",color:"primary",disableElevation:!0,onClick:function(){U(!0)},disabled:"loading"===l?"disabled":"",children:"Delete account"})]})]})]})]})):Object(n.jsx)(Z.a,{className:"circularProgress",open:!a,children:Object(n.jsx)($.a,{color:"inherit"})}):Object(n.jsx)(d.a,{to:"/signin"})},Pe=a(68),Ee=a(130),Fe=a.n(Ee),Ae=a.p+"static/media/opacity-24px.fa8b6048.svg",De=a.p+"static/media/block-24px.16f94575.svg",Te=a.p+"static/media/invert_colors_off-24px.132f5f92.svg",Le=a.p+"static/media/report_problem-24px.5fd41aa5.svg";function qe(e){var t=e.shortages,a=e.workingStations,o=e.notWorkingStations,i=e.unsafe,s=e.zoom,l=e.google,d=Object(c.useState)(""),u=Object(r.a)(d,2),b=u[0],m=u[1],O=Object(c.useState)({lat:51.507351,lng:-.127758}),h=Object(r.a)(O,2),p=h[0],x=h[1],f=Object(c.useState)(!1),g=Object(r.a)(f,2),v=g[0],y=g[1],w=Object(c.useState)({}),N=Object(r.a)(w,2),S=N[0],C=N[1],_=Object(c.useState)({}),k=Object(r.a)(_,2),I=k[0],z=k[1],P=null,E=null,F=null,A=null;return null!=t&&(P=t.map((function(e){var t=e.basearea.split(",");return Object(n.jsx)(Pe.Marker,{type:"Water shortage detected",countyName:e.county,position:{lat:t[0],lng:t[1]},icon:{url:Te,anchor:new l.maps.Point(22,22),scaledSize:new l.maps.Size(25,25)},onClick:function(e,t){var a=t.getPosition().lat(),n=t.getPosition().lng();z(e),C(t),y(!v),x({lat:a,lng:n})}},e.catId+" "+e.countyId+" "+e.basearea)}))),null!=a&&(E=a.map((function(e){return Object(n.jsx)(Pe.Marker,{type:"Working water station",countyName:e.county,stationSize:e.size,capacity:e.capacity,installDate:e.installDate,position:{lat:e.lat,lng:e.lang},icon:{url:Ae,anchor:new l.maps.Point(22,22),scaledSize:new l.maps.Size(25,25)},onClick:function(e,t){var a=t.getPosition().lat(),n=t.getPosition().lng();z(e),C(t),y(!v),x({lat:a,lng:n})}},e.stationId)}))),null!=o&&(F=o.map((function(e){return Object(n.jsx)(Pe.Marker,{type:"Water station not working",countyName:e.county,stationSize:e.size,capacity:e.capacity,installDate:e.installDate,position:{lat:e.lat,lng:e.lang},icon:{url:De,anchor:new l.maps.Point(22,22),scaledSize:new l.maps.Size(25,25)},onClick:function(e,t){var a=t.getPosition().lat(),n=t.getPosition().lng();z(e),C(t),y(!v),x({lat:a,lng:n})}},e.stationId)}))),null!=i&&(A=i.map((function(e){var t=e.basearea.split(",");return Object(n.jsx)(Pe.Marker,{type:"Water not safe to drink",countyName:e.county,position:{lat:t[0],lng:t[1]},icon:{url:Le,anchor:new l.maps.Point(22,22),scaledSize:new l.maps.Size(25,25)},onClick:function(e,t){var a=t.getPosition().lat(),n=t.getPosition().lng();z(e),C(t),y(!v),x({lat:a,lng:n})}},e.catId+" "+e.countyId+" "+e.basearea)}))),Object(n.jsxs)("div",{id:"googleMaps",children:[Object(n.jsx)(Fe.a,{value:b,onChange:function(e){m(e)},onSelect:function(e){m(e),Object(Ee.geocodeByAddress)(b).then((function(e){return Object(Ee.getLatLng)(e[0])})).then((function(e){x(e)})).catch((function(e){return console.error("Error",e)}))},children:function(e){var t=e.getInputProps,a=e.suggestions,c=e.getSuggestionItemProps,o=e.loading;return Object(n.jsxs)("div",{style:{position:"relative"},children:[Object(n.jsx)("input",Object(j.a)({},t({placeholder:"Search here",className:"location-search-input"}))),Object(n.jsxs)("div",{className:"autocomplete-dropdown-container",children:[o&&Object(n.jsx)("div",{children:"Loading..."}),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(n.jsx)("div",Object(j.a)(Object(j.a)({},c(e,{className:t,style:a})),{},{children:Object(n.jsx)("span",{children:e.description})}))}))]})]})}}),Object(n.jsxs)(Pe.Map,{className:"leMap",disableDefaultUI:!0,google:l,initialCenter:{lat:p.lat,lng:p.lng},center:{lat:p.lat,lng:p.lng},zoom:s,zoomControl:!0,onClick:function(){y(!1)},children:[P,E,F,A,S?Object(n.jsx)(Pe.InfoWindow,{visible:v,marker:S,children:Object(n.jsxs)("div",{children:[console.log(I),I.type?Object(n.jsx)("h3",{children:I.type}):null,I.countyName?Object(n.jsxs)("p",{children:["County: ",I.countyName]}):null,I.stationSize?Object(n.jsxs)("p",{children:["Size: ",I.stationSize]}):null,I.capacity?Object(n.jsxs)("p",{children:["Capacity: ",I.capacity]}):null,I.installDate?Object(n.jsxs)("p",{children:["Installation Date: ",I.installDate]}):null]})}):null]})]})}qe.defaultProps={zoom:9};var We=Object(Pe.GoogleApiWrapper)({apiKey:"AIzaSyAtfkcYPIZml6OSBFkeRaOHohdU-i_ojUo"})(qe);a(302);var Be=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)([]),s=Object(r.a)(i,2),l=s[0],d=s[1],u=Object(c.useState)([]),j=Object(r.a)(u,2),b=j[0],m=j[1],O=Object(c.useState)([]),h=Object(r.a)(O,2),p=h[0],f=h[1],g=Object(c.useState)(!1),v=Object(r.a)(g,2),y=v[0],w=v[1];return Object(c.useEffect)((function(){w(!0),x.a.all([x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/stations/list"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/shortage/list"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/dirty/list")]).then(x.a.spread((function(e,t,a){m(e.data.filter((function(e){return!0===e.isWorking}))),f(e.data.filter((function(e){return!1===e.isWorking}))),o(t.data),d(a.data),w(!1)}))).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)("div",{className:"fullHeight",children:y?Object(n.jsx)(Z.a,{className:"circularProgress",open:y,children:Object(n.jsx)($.a,{color:"inherit"})}):Object(n.jsx)(We,{shortages:a,workingStations:b,notWorkingStations:p,unsafe:l})})};a(303);var Ue=function(e){var t=e.children;return Object(n.jsx)("nav",{children:Object(n.jsx)("div",{className:"bottom-bar",children:Object(n.jsx)("ul",{className:"bottom-menu",children:t})})})},Me=a(126),Re=a.n(Me),He=(a(304),a(494)),Ve=a(485),Je=a(220),Ke=a(127),Ge=a.n(Ke),Ye=a(204),Xe=a.n(Ye);var Qe=function(){var e=Object(c.useState)("idle"),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)("/signin"),s=Object(r.a)(i,2),u=s[0],j=s[1],m=Object(c.useState)(localStorage.getItem("userId")),O=Object(r.a)(m,1)[0];Object(c.useEffect)((function(){console.log(O),O?(o("login"),j("/profile")):j("/signin")}),[O]);var h=Object(c.useState)(!1),p=Object(r.a)(h,2),x=p[0],f=p[1],g=Object(c.useState)(null),v=Object(r.a)(g,2),y=v[0],w=v[1],N=function(e,t){"clickaway"!==t&&o("idle")},S=function(){w(null)};return"logout"===a?Object(n.jsx)(d.a,{to:"/signin"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(ee.a,{open:"login"===a,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:N,children:Object(n.jsx)(oe.a,{onClose:N,severity:"success",children:"User logged in successfully"})}),Object(n.jsx)("div",{className:"appBarContainer",children:Object(n.jsxs)(He.a,{position:"static",className:"appBar",children:[Object(n.jsxs)("div",{className:"title",children:[Object(n.jsx)("div",{className:"logo"}),Object(n.jsx)("h1",{children:"More Clean Water"})]}),Object(n.jsxs)(Ve.a,{className:"toolBar",children:[Object(n.jsxs)(b.a,{container:!0,md:8,className:"desktopOnly",children:[Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(l.c,{to:"/find-water",children:"Find Water"})}),Object(n.jsx)("li",{children:Object(n.jsx)(l.c,{to:"/awareness",children:"Awareness"})})]}),Object(n.jsxs)("div",{className:"notificationsArea",children:[Object(n.jsx)(je.a,{"aria-controls":"notifications-list","aria-haspopup":"true",component:"div",className:"notificationsMenu",onClick:function(e){return f(!x)},children:Object(n.jsx)(Re.a,{})}),Object(n.jsxs)("div",{className:"updates-container overlay ".concat(x?"active":""),children:[Object(n.jsx)("div",{className:"arrow",onClick:function(e){return f(!x)},children:Object(n.jsx)(Xe.a,{})}),Object(n.jsx)(X,{})]})]})]}),Object(n.jsx)(je.a,{"aria-controls":"profile-menu","aria-haspopup":"true",component:"div",className:"profileMenu",onClick:function(e){return w(e.currentTarget)},children:Object(n.jsx)(Ge.a,{className:"profileIcon"})}),Object(n.jsxs)(Je.a,{id:"profile-menu",anchorEl:y,keepMounted:!0,PaperProps:{style:{width:"12ch"}},open:Boolean(y),onClose:S,children:[Object(n.jsx)(I.a,{onClick:S,component:l.b,to:u,children:O?"Profile":"Sign In"}),O?Object(n.jsx)(I.a,{onClick:function(e){localStorage.removeItem("userId"),o("logout"),j("/signin")},children:"Logout"}):""]})]})]})})]})};a(305);var Ze=function(e){var t=e.icon,a=e.title,c=e.to;return Object(n.jsx)(l.c,{to:c,children:Object(n.jsxs)("li",{className:"bottom-menu-item",children:[Object(n.jsx)("div",{className:"bottom-menu-item__icon material-icons",children:t}),Object(n.jsx)("div",{className:"bottom-menu-item__title",children:a})]})})},$e=a(128),et=a.n($e),tt=a(205),at=a.n(tt);var nt=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(Qe,{}),Object(n.jsxs)(Ue,{children:[Object(n.jsx)(Ze,{icon:Object(n.jsx)(et.a,{}),title:"Awareness",to:"/awareness"}),Object(n.jsx)(Ze,{icon:Object(n.jsx)(at.a,{}),title:"Find Water",to:"/find-water"}),Object(n.jsx)(Ze,{icon:Object(n.jsx)(Re.a,{}),title:"Updates",to:"/updates"})]})]})};var ct=function(){var e=[{label:"Email",name:"email",required:!0,component:w.a}],t=Object(c.useState)({email:""}),a=Object(r.a)(t,2),o=a[0],i=a[1],s=Object(c.useState)(null),O=Object(r.a)(s,2),p=O[0],x=O[1],f=Object(c.useState)({}),g=Object(r.a)(f,2),v=g[0],y=g[1],N=function(){var t=!0,a=e.filter((function(e){return e.required})),n=Object(j.a)({},v);return a.forEach((function(e){n[e.name]="",o[e.name]||(n[e.name]="Ops! This field is required",t=!1)})),y(Object(j.a)(Object(j.a)({},v),n)),t};return p?Object(n.jsx)(d.a,{push:!0,to:p}):Object(n.jsxs)("div",{className:"landing-page",children:[Object(n.jsx)(B,{}),Object(n.jsx)("div",{className:"content-wrapper",children:Object(n.jsxs)(b.a,{container:!0,alignContent:"center",className:"content",justify:"center",children:[Object(n.jsxs)("div",{className:"title",children:[Object(n.jsx)("div",{className:"logo",children:Object(n.jsx)("h1",{children:"More Clean Water"})}),Object(n.jsx)("h2",{children:"Helping you to access clean water"}),Object(n.jsx)("h3",{children:"Sign up now and receive water shortage alerts, water cleaning advises and more."})]}),Object(n.jsxs)("form",{className:h.a.landingForm,children:[Object(n.jsx)(w.a,{autoComplete:"on",id:"email",name:"email",label:"Email",variant:"outlined",value:o.email,error:v.email?"error":"",helperText:v.email,className:h.a.formInput,onChange:function(e){return i(Object(j.a)(Object(j.a)({},o),{},Object(u.a)({},e.target.name,e.target.value)))}}),Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){N()&&(L.value=o.email,x("/signup"))},children:"Sign Up"}),Object(n.jsxs)("div",{className:h.a.actions,children:[Object(n.jsx)("p",{children:"Are you already registered?"}),Object(n.jsx)(m.a,{variant:"text",color:"primary",disableElevation:!0,component:l.c,to:"/signin",children:"Sign in"}),Object(n.jsx)(l.c,{to:"/find-water",className:h.a.link,children:"Or proceed without sign up"})]})]})]})})]})},ot=a(206),it=a.n(ot),st=a(496),rt=a(495),lt=a(497),dt=a(498),ut=a(434),jt=a(207),bt=a.n(jt);function mt(e){var t=e.open,a=e.postedArticle,c=e.handleModalClose;return Object(n.jsx)(ut.a,{open:t,onClose:function(){return c(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",BackdropProps:{invisible:!0},children:Object(n.jsxs)(b.a,{container:!0,className:G.a.containerModal,children:[Object(n.jsx)(je.a,{className:G.a.backButton,onClick:function(){return c(!1)},children:Object(n.jsx)(bt.a,{})}),Object(n.jsxs)(b.a,{container:!0,direction:"column",xs:12,md:7,className:G.a.contentModal,children:[Object(n.jsxs)("div",{className:G.a.mediaArea,ref:function(e){return function(e){e&&console.log(e.getBoundingClientRect().width)}(e)},children:[a.image?Object(n.jsx)(rt.a,{className:G.a.media,image:a.image,title:a.title}):null,a.video?Object(n.jsx)(rt.a,{className:G.a.media,component:"iframe",title:a.title,src:a.video}):null]}),a.body?Object(n.jsx)("div",{className:G.a.text,dangerouslySetInnerHTML:{__html:a.body}}):null]})]})})}a(208);var Ot=a(209),ht=a.n(Ot),pt=a(501);function xt(e){console.log(G.a);var t=e.article,a=e.uniquekey,o=e.handleEdit,i=e.handleDelete,s=e.mode,l=Object(c.useState)({}),d=Object(r.a)(l,2),u=d[0],j=d[1],O=Object(c.useState)(null),h=Object(r.a)(O,2),p=h[0],x=h[1],f=Object(c.useState)(!1),g=Object(r.a)(f,2),v=g[0],y=g[1],w=Object(c.useState)(!1),N=Object(r.a)(w,2),S=N[0],C=N[1];Object(c.useEffect)((function(){j(t)}),[t]);var _=function(){x(null)},k=function(){y(!0)},z=function(){C(!1)};return Object(n.jsx)(b.a,{item:!0,xs:12,sm:6,children:Object(n.jsxs)(R.a,{variant:"outlined",className:G.a.root,children:[Object(n.jsx)(st.a,{className:G.a.header,avatar:Object(n.jsx)(pt.a,{"aria-label":"category",className:G.a.avatar,children:"M"}),action:!!e.isAdmin&&Object(n.jsx)(je.a,{onClick:function(e){x(e.currentTarget)},children:Object(n.jsx)(Ge.a,{})}),title:u.title}),e.isAdmin?Object(n.jsxs)(Je.a,{keepMounted:!0,id:"settings-menu",anchorEl:p,open:Boolean(p),onClose:_,children:[Object(n.jsx)(I.a,{onClick:function(){_(),o(a)},children:Object(n.jsx)(V.a,{variant:"caption",children:"Edit"})}),Object(n.jsx)(I.a,{onClick:function(){C(!0),_()},children:Object(n.jsx)(V.a,{variant:"caption",children:"Delete"})})]}):"",Object(n.jsxs)(lt.a,{className:G.a.actionArea,onClick:k,children:[Object(n.jsxs)("div",{className:G.a.mediaArea,children:[u.image?Object(n.jsx)(rt.a,{className:G.a.media,image:u.image,title:u.title}):null,u.video?Object(n.jsx)(rt.a,{className:G.a.media,component:"iframe",title:u.title,src:u.video}):null]}),Object(n.jsx)(H.a,{className:G.a.content,children:u.body?Object(n.jsx)("div",{dangerouslySetInnerHTML:{__html:u.body.substr(0,125)+" ..."}}):null})]}),"dialogue"!==s?Object(n.jsx)(J.a,{children:Object(n.jsx)(dt.a,{component:"button",variant:"body2",style:{marginLeft:"auto"},onClick:k,children:Object(n.jsx)(ht.a,{style:{color:"#78787c"}})})}):null,Object(n.jsx)(mt,{open:v,postedArticle:u,handleModalClose:function(e){y(e)}}),Object(n.jsxs)(Ne.a,{open:S,onClose:z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(Ce.a,{children:Object(n.jsx)(_e.a,{id:"alert-dialog-description",children:"Are you sure you want to delete?"})}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(m.a,{onClick:z,color:"primary",children:"Cancel"}),Object(n.jsx)(m.a,{onClick:function(){return i(a)},color:"primary",autoFocus:!0,children:"OK"})]})]})]})})}function ft(e){var t=e.postedArticle,a=e.setEditKey,o=e.className,i=Object(c.useState)(""),s=Object(r.a)(i,2),l=s[0],d=s[1],u=Object(c.useState)(!1),j=Object(r.a)(u,2),m=j[0],O=j[1],h=function(e){"clickaway"!==e&&O(!1)},p=function(e){console.log("hello "+e),ge.child("".concat(e)).remove(),d("Content deleted successfully"),O(!0)},x=function(e){return a(e)};return Object(n.jsxs)("div",{style:e.style,className:"".concat(G.a.viewContent," ").concat(o),children:[Object(n.jsxs)(b.a,{container:!0,className:"".concat(G.a.awarenessContent," ").concat(o),spacing:3,children:[Object(n.jsx)(ee.a,{open:m,autoHideDuration:4e3,onClose:h,children:Object(n.jsx)(oe.a,{onClose:h,severity:"success",children:l})}),t?it.a.map(t,(function(t,a){return function(t,a){return Object(n.jsx)(xt,{article:t,uniquekey:a,handleEdit:x,handleDelete:p,isAdmin:e.isAdmin})}(t,a)})):null]}),Object(n.jsx)("div",{className:G.a.buttons,children:e.children})]})}function gt(){var e=Object(c.useState)("idle"),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)([]),s=Object(r.a)(i,2),l=s[0],d=s[1];Object(c.useEffect)((function(){u()}),[]);var u=function(){o("loading"),console.log("before load data"),ge.on("value",(function(e){d(e.val())})),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list").then((function(e){o("success")})).catch((function(e){return console.log(e)})),console.log("after load data")};return Object(n.jsxs)(b.a,{container:!0,justify:"center",className:G.a.container,children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===a?"":"hidden")}),Object(n.jsx)(b.a,{item:!0,xs:11,md:8,children:Object(n.jsx)(ft,{postedArticle:l,isAdmin:!1})})]})}var vt=a(129),yt=a.n(vt);function wt(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)(""),o=Object(r.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)(""),u=Object(r.a)(l,2),j=u[0],O=u[1],p=Object(c.useState)(""),f=Object(r.a)(p,2),g=f[0],v=f[1],y=Object(c.useState)(""),N=Object(r.a)(y,2),S=N[0],C=N[1],_=Object(c.useState)(!1),k=Object(r.a)(_,2),I=k[0],z=k[1],P=Object(c.useState)(!1),E=Object(r.a)(P,2),F=E[0],A=E[1],D=Object(c.useState)([]),T=Object(r.a)(D,2),L=T[0],q=T[1],W=Object(c.useState)([]),B=Object(r.a)(W,2),U=B[0],M=B[1],R=[],H=function(){x.a.delete("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/delete/"+U[0].id).then((function(){v("Section is deleted successfully"),A(!0)})).catch((function(e){C(e.message),z(!0),console.log(e+" error")}))},V=function(){O(""),s("")},J=function(e){"clickaway"!==e&&A(!1)},K=function(e){"clickaway"!==e&&z(!1)},G=[{field:"id",hide:!0},{field:"name",headerName:Object(n.jsx)("strong",{children:"Category"}),flex:.5},{field:"description",headerName:Object(n.jsx)("strong",{children:"Description"}),flex:1},{field:"actions",headerName:Object(n.jsx)("strong",{children:"Actions"}),flex:.5,renderCell:function(){return Object(n.jsx)("div",{children:Object(n.jsx)(yt.a,{style:{cursor:"pointer",color:"#78787c"},onClick:H})})}}];return Object(c.useEffect)((function(){x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list").then((function(e){return q(e.data)})).catch((function(e){return console.log(e)}))}),[F]),"undefined"!==typeof L&&L.length>0&&(R=L.map((function(e){return R[e]=e}))),t?0===L.length?Object(n.jsx)(Z.a,{className:"circularProgress",open:0===L.length,children:Object(n.jsx)($.a,{color:"inherit"})}):Object(n.jsxs)("div",{children:[Object(n.jsx)(ee.a,{open:F,autoHideDuration:4e3,onClose:J,children:Object(n.jsx)(oe.a,{onClose:J,severity:"success",children:g})}),Object(n.jsx)(ee.a,{open:I,autoHideDuration:4e3,onClose:K,children:Object(n.jsx)(oe.a,{onClose:K,severity:"error",children:S})}),Object(n.jsx)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:h.a.content,children:[Object(n.jsx)("form",{className:h.a.adminForm,children:Object(n.jsxs)("div",{className:"".concat(h.a.title," ").concat(h.a.admin),children:[Object(n.jsx)("h2",{children:"Awareness / Categories"}),Object(n.jsxs)(b.a,{container:!0,className:h.a.adminContent,justify:"space-between",spacing:3,children:[Object(n.jsx)(b.a,{item:!0,xs:12,sm:5,children:Object(n.jsx)(w.a,{required:!0,id:"standard-basic-category",label:"Category name",value:j,onChange:function(e){return O(e.target.value)},variant:"outlined",className:"".concat(h.a.formInput)})}),Object(n.jsx)(b.a,{item:!0,xs:12,sm:5,children:Object(n.jsx)(w.a,{id:"standard-basic-desc",label:"Description",value:i,onChange:function(e){return s(e.target.value)},variant:"outlined",className:"".concat(h.a.formInput)})}),Object(n.jsx)(b.a,{item:!0,xs:12,sm:2,children:Object(n.jsx)(m.a,{variant:"contained",size:"small",color:"primary",disableElevation:!0,disabled:""===j,className:"".concat(h.a.formInput),onClick:function(){x.a.post("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/add",{name:j,description:i}).then((function(){v("Section is created successfully"),A(!0),V()})).catch((function(e){C(e.message),z(!0),console.log(e+" error")}))},children:"SAVE"})})]})]})}),Object(n.jsx)("div",{className:ae.a.dataGrid,children:Object(n.jsx)("div",{className:ae.a.content,children:Object(n.jsx)(ne.a,{rows:R,columns:G,autoPageSize:!0,onRowSelected:function(e){console.log(e.data.id),M(R.filter((function(t){return t.id===e.data.id})))},disableColumnSelector:!0,disableSelectionOnClick:!0})})})]})})]}):Object(n.jsx)(d.a,{to:"/admin"})}var Nt=a(210),St=a.n(Nt),Ct=(a(405),a(217)),_t=a(105);function kt(e){var t=e.data,a=e.style,o=e.mode,i=e.status,s=e.onSubmit,l=e.onCancel,d=Object(c.useState)([]),O=Object(r.a)(d,2),p=O[0],f=O[1],g=Object(c.useState)(!1),v=Object(r.a)(g,2),y=v[0],N=v[1],z=Object(c.useState)(null),P=Object(r.a)(z,2),E=P[0],F=P[1],A=Object(c.useState)(""),D=Object(r.a)(A,2),T=D[0],L=(D[1],Object(c.useState)(!1)),q=Object(r.a)(L,2),W=q[0],B=q[1],U=Object(c.useState)(t),M=Object(r.a)(U,2),R=M[0],H=M[1];Object(c.useEffect)((function(){x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list").then((function(e){return f(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(c.useEffect)((function(){H(t)}),[t]);Object(_t.a)((function(){return{text:{width:"500px",margin:"10px"},button:{backgroundColor:"white",width:"50px",margin:"10px","&:hover":{backgroundColor:"#A2EA2E"}}}}))();var V=function(e){"clickaway"!==e&&B(!1)},J=function(e){H(Object(j.a)(Object(j.a)({},R),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(n.jsxs)("form",{className:h.a.adminForm,style:a,children:[Object(n.jsx)("div",{className:"".concat(h.a.title," ").concat(h.a.awareness),children:Object(n.jsxs)(b.a,{container:!0,className:h.a.adminContent,justify:"space-between",spacing:3,children:[Object(n.jsx)(b.a,{item:!0,xs:12,children:Object(n.jsx)(w.a,{name:"title",required:!0,className:"".concat(h.a.formInput),variant:"outlined",id:"standard-basic-title",label:"Title",value:R?R.title:"",onChange:J})}),Object(n.jsx)(b.a,{item:!0,xs:12,md:4,children:Object(n.jsxs)(C.a,{variant:"outlined",color:"primary",className:"".concat(h.a.formInput),children:[Object(n.jsx)(_.a,{id:"category-combobox",children:"Category"}),Object(n.jsxs)(k.a,{id:"categoryId",name:"categoryId",label:"category",labelId:"category-label",value:R?R.categoryId:"",onChange:J,children:[Object(n.jsx)(I.a,{value:null,children:"\xa0"}),Object(S.a)(p).map((function(e){return Object(n.jsx)(I.a,{value:e.id,children:e.name},e.id)}))]},"categoryId")]})}),Object(n.jsx)(b.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsx)(w.a,{className:"".concat(h.a.formInput),variant:"outlined",id:"standard-basic-videourl",label:"Video URL",name:"video",value:R?R.video:"",onChange:J})}),Object(n.jsxs)(b.a,{item:!0,xs:12,sm:6,md:4,children:[Object(n.jsx)(m.a,{className:"".concat(h.a.formInput),style:{height:"3.5rem"},variant:"outlined",size:"small",color:"primary",disableElevation:!0,onClick:function(){N(!0)},children:"Image"}),E?E.name:R?R.imageTitle:null]})]})}),Object(n.jsxs)("div",{className:ae.a.textEditor,children:[Object(n.jsx)(Ct.a,{open:y,onSave:function(e){F(e[0]),N(!1)},acceptedFiles:["image/jpeg","image/png","image/bmp","image/gif"],showPreviews:!0,filesLimit:1,maxFileSize:5e6,onClose:function(){N(!1)}}),Object(n.jsx)(St.a,{onChange:function(e){H(Object(j.a)(Object(j.a)({},R),{},{body:e}))},defaultValue:R?R.body:null,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]}]]},formats:["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","color"],placeholder:"Write content here...."}),Object(n.jsx)(ee.a,{open:W,autoHideDuration:4e3,onClose:V,children:Object(n.jsx)(oe.a,{onClose:V,severity:"success",children:T})})]}),Object(n.jsxs)("div",{className:"".concat(h.a.buttons," ").concat(h.a.admin),children:[Object(n.jsxs)(m.a,{variant:"contained",color:"primary",size:"small",onClick:function(){return s(R,E)},disableElevation:!0,disabled:"loading"===i?"disabled":"",children:["create"===o&&"Create","update"===o&&"Update"]}),Object(n.jsx)(m.a,{variant:"outlined",size:"small",style:{marginLeft:16},onClick:function(){H([]),l()},disableElevation:!0,children:"Cancel"})]})]})}function It(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)("retrieve"),o=Object(r.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)("idle"),u=Object(r.a)(l,2),j=u[0],O=u[1],p=Object(c.useState)([]),f=Object(r.a)(p,2),g=f[0],v=f[1],y=Object(c.useState)([]),w=Object(r.a)(y,2),N=(w[0],w[1]),S=Object(c.useState)([]),C=Object(r.a)(S,2),_=C[0],k=C[1],I=Object(c.useState)(""),z=Object(r.a)(I,2),P=z[0],E=z[1],F=Object(c.useState)(!1),A=Object(r.a)(F,2),D=A[0],T=A[1],L=Object(c.useState)(),q=Object(r.a)(L,2),B=q[0],U=q[1];Object(c.useEffect)((function(){M()}),[]);var M=function(){O("loading"),console.log("before load data"),ge.on("value",(function(e){k(e.val())})),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/sections/list").then((function(e){N(e.data),s("retrieve"),O("success")})).catch((function(e){return console.log(e)})),console.log("after load data")},R=function(e,t){console.log("inside create"),O("loading"),console.log("selectedFile "+t),console.log("title "+e.title),console.log("selectedCategory "+e.categoryId),console.log("body "+e.body),console.log("video "+e.video),ve.ref("/images/".concat(t.name)).put(t).on((function(e){console.log(e),O("error")}),(function(){ve.ref("images").child(t.name).getDownloadURL().then((function(a){console.log("before push"),ge.push({categoryId:e.categoryId,title:e.title?e.title:"",body:e.body?e.body:"",image:a,imageTitle:t.name,video:e.video?e.video:""}),console.log("after push"),E("Content uploaded successfully"),T(!0),V(),M()}))}))},H=function(e){"clickaway"!==e&&T(!1)},V=function(){v([])},J=function(e,t){console.log("inside update"),O("loading"),e&&(t?ve.refFromURL(e.image).delete().then((function(){console.log("file deleted successfully"),ve.ref("/images/".concat(t.name)).put(t).on((function(e){console.log(e),O("error")}),(function(){ve.ref("images").child(t.name).getDownloadURL().then((function(a){K(e,t,a)}))}))})):K(e,null,null))},K=function(e,t,a){console.log("key in update"),ge.child("".concat(B)).set({categoryId:e.categoryId,title:e.title,body:e.body,image:a||e.image,imageTitle:t?t.name:e.imageTitle,video:e.video}),E("Content uploaded successfully"),T(!0),V(),M()};return t?Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===j?"":"hidden")}),Object(n.jsx)(ee.a,{open:D,autoHideDuration:4e3,onClose:H,children:Object(n.jsx)(oe.a,{onClose:H,severity:"success",children:P})}),Object(n.jsx)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:"".concat(h.a.content," ").concat(h.a.awarenessContent),children:[Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.adminContent),children:"Content"}),Object(n.jsx)(ft,{style:{display:"retrieve"===i?"flex":"none"},postedArticle:_,setEditKey:function(e){console.log("key "+e),s("update"),U(e),ge.child(e).on("value",(function(e){v(e.val())}))},isAdmin:!0,className:G.a.admin,children:Object(n.jsx)(m.a,{style:{display:"retrieve"===i?"flex":"none"},variant:"contained",size:"small",onClick:function(e){console.log("returned value "+e),s("create")},color:"primary",disableElevation:!0,children:"Add"})}),Object(n.jsx)(kt,{mode:i,status:j,style:{display:"retrieve"!==i?"flex":"none"},data:g,onSubmit:function(e,t){"create"===i&&R(e,t),"update"===i&&J(e,t)},onCancel:function(){s("retrieve"),g.title="",v([])}})]})})]}):Object(n.jsx)(d.a,{to:"/admin"})}a(415);function zt(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.className,r=e.options,l=e.onChange,d=e.onFocus;return Object(n.jsx)(w.a,Object(j.a)(Object(j.a)({name:t,id:t,label:a,value:c,error:o,helperText:i,variant:"outlined",InputLabelProps:{shrink:!0},onChange:l,onFocus:d,className:s},r),{},{type:"date"}))}function Pt(e){var t=e.name,a=e.label,c=e.value,o=e.error,i=e.helperText,s=e.className,r=e.options,l=e.onChange,d=e.onFocus;return Object(n.jsx)(w.a,Object(j.a)(Object(j.a)({name:t,id:t,label:a,value:c,error:o,helperText:i,variant:"outlined",InputLabelProps:{shrink:!0},onChange:l,onFocus:d,className:s},r),{},{type:"time"}))}var Et=a(216),Ft=a.n(Et);var At=function(){var e=Object(c.useState)(localStorage.getItem("adminId")),t=Object(r.a)(e,1)[0],a=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),o=Object(r.a)(a,2),i=o[0],s=o[1],l=[{field:"id",headerName:"ID",width:70},{field:"title",headerName:"Title",width:400},{field:"eventDate",headerName:"Event Date",width:130},{field:"eventTime",headerName:"Event Time",width:130,cellClassName:function(e){return e.isCancelled?ae.a.inactive:""}},{field:"isCancelled",headerName:"Active",width:100,renderCell:function(e){return Object(n.jsx)("div",{style:{height:"100%",width:"100%"},children:e.row.isCancelled?"Cancelled":"Active"})}},{field:"actions",headerName:"Actions",sortable:!1,width:100,renderCell:function(e){return Object(n.jsxs)("div",{style:{display:"flex",height:"100%",alignItems:"center"},children:[Object(n.jsx)(le.a,{id:e.row.id,onClick:q,style:{cursor:"pointer",color:"#78787c"}}),Object(n.jsx)(Ft.a,{id:e.row.id,onClick:L,style:{cursor:"pointer",color:"#78787c",marginLeft:".6rem"}})]})}}],u=[{label:"Title",name:"title",required:!0,component:N,order:2},{label:"Date",name:"eventDate",required:!0,component:zt,options:{className:"".concat(h.a.formInput," ").concat(h.a.col2)},order:4},{label:"Time",name:"eventTime",required:!0,component:Pt,options:{className:"".concat(h.a.formInput," ").concat(h.a.col2)},order:5},{label:"Link",name:"link",required:!0,component:N,order:1},{label:"Description",name:"description",required:!0,component:N,options:{multiline:!0,rows:4},order:3}],O=Object(c.useState)(),p=Object(r.a)(O,2),f=p[0],g=p[1],v=function(){var e={};return u.sort((function(e,t){return e.order-t.order})).forEach((function(t){e[t.name]=""})),e},y=Object(c.useState)("retrieve"),w=Object(r.a)(y,2),S=w[0],C=w[1],_=Object(c.useState)("idle"),k=Object(r.a)(_,2),I=k[0],z=k[1],P=Object(c.useState)(v),E=Object(r.a)(P,2),F=E[0],A=E[1];Object(c.useEffect)((function(){D()}),[]);var D=function(){z("loading"),x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/events/list").then((function(e){e.data?i?T(e.data):x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/county/list").then((function(t){t.data&&(t.data.sort((function(e,t){return e.countyResponse>t.countyResponse?1:-1})),localStorage.setItem("countyList",JSON.stringify(t.data)),s(JSON.parse(localStorage.getItem("countyList"))),T(e.data,t.data))})).catch((function(e){return console.log(e)})):console.log(e)})).catch((function(e){return console.log(e)}))},T=function(e,t){t||(t=i);var a=e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{id:String(e.eventId),county:e.countyId&&t.find((function(t){return e.countyId===t.countyId})).county})}));console.log(a),g(a),C("retrieve"),z("success"),A(v)},L=function(e){var t=f.find((function(t){return t.id===e.currentTarget.id})).eventId;x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/events/cancel/"+t).then((function(e){"Event is cancelled successfully"===e.data?D():(console.log(e),z("error"))})).catch((function(e){console.log(e),z("error")}))},q=function(e){A(f.filter((function(t){return t.id===e.currentTarget.id}))[0]),console.log(F),C("update")},B=function(e){z("loading"),delete e.county,e.isCancelled=!1,console.log(e),x.a.post("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/events/add",e).then((function(e){"Event is created successfully"===e.data?D():(console.log(e),z("error"))})).catch((function(e){console.log(e),z("error")}))},U=function(e){z("loading"),delete e.county,delete e.id,console.log(e.eventId,e),x.a.put("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/events/edit/"+e.eventId,e).then((function(e){"Event is postponed successfully"===e.data?D():(console.log(e),z("error"))})).catch((function(e){console.log(e),z("error")}))},M=Object(c.useState)(!1),R=Object(r.a)(M,2),H=R[0],V=R[1],J=function(e,t){"clickaway"!==t&&z("idle")};return t?f?Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{className:"linearProgress ".concat("loading"===I?"":"hidden")}),Object(n.jsxs)(b.a,{container:!0,justify:"center",className:"".concat(h.a.container," ").concat(h.a.admin),children:[Object(n.jsx)(ee.a,{open:"success"===I,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:J,children:Object(n.jsx)(oe.a,{onClose:J,severity:"success",children:"Data successfully loaded"})}),Object(n.jsxs)(b.a,{item:!0,xs:10,md:8,className:h.a.content,children:[Object(n.jsx)("h2",{className:"".concat(h.a.title," ").concat(h.a.admin),children:"Events"}),Object(n.jsxs)(ce,{className:ae.a.dataGrid,style:{display:"retrieve"===S?"flex":"none"},rows:f,columns:l,onSelectionChange:function(e){var t;0===e.rowIds.length?V(!1):V(!0),t=e.rowIds,console.log(t)},disableSelectionOnClick:!0,disableColumnSelector:!0,showToolbar:!0,autoPageSize:!0,children:[Object(n.jsx)(m.a,{variant:"contained",size:"small",onClick:function(e){C("create")},color:"primary",disableElevation:!0,disabled:"loading"===I?"disabled":"",children:"Add"}),Object(n.jsx)(m.a,{variant:"text",size:"small",style:{marginLeft:16},onClick:function(e){},className:H?"":"hidden",disableElevation:!0,disabled:"loading"===I?"disabled":"",children:"Delete"})]}),Object(n.jsx)(se,{mode:S,inputItems:u,data:F,status:I,style:{display:"retrieve"!==S?"flex":"none"},onSubmit:function(e){"create"===S&&B(e),"update"===S&&U(e)},onCancel:function(){C("retrieve"),A(v)}})]})]})]}):Object(n.jsx)(Z.a,{className:"circularProgress",open:!f,children:Object(n.jsx)($.a,{color:"inherit"})}):Object(n.jsx)(d.a,{to:"/admin"})};function Dt(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(c.useState)(""),s=Object(r.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)(!1),O=Object(r.a)(j,2),p=O[0],x=O[1],f=Object(c.useState)(),g=Object(r.a)(f,2),v=g[0],y=g[1],N=Object(c.useState)(!1),S=Object(r.a)(N,2),C=S[0],_=S[1];Object(c.useEffect)((function(){ye.onAuthStateChanged((function(e){e?(localStorage.setItem("adminId",e.email),y(e),x(!1),_(!1)):(y(""),localStorage.removeItem("adminId"))}))}),[]);return v?Object(n.jsx)(d.a,{to:"/admin/users"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(ee.a,{open:C,autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:function(e,t){"clickaway"!==t&&_(!1)},children:Object(n.jsx)(oe.a,{severity:"error",children:"Wrong email/password"})}),Object(n.jsx)(W.a,{className:"linearProgress ".concat(p?"":"hidden")}),Object(n.jsx)(b.a,{justify:"center",className:h.a.container,children:Object(n.jsxs)(b.a,{item:!0,xs:10,md:5,className:"".concat(h.a.content," "),children:[Object(n.jsx)("h2",{className:h.a.title,children:"Admin console"}),Object(n.jsxs)("form",{className:h.a.signInForm,children:[Object(n.jsx)(w.a,{required:!0,type:"email",value:a,className:"".concat(h.a.formInput),variant:"outlined",id:"standard-basic-email",label:"Email",onChange:function(e){return o(e.target.value)}}),Object(n.jsx)(w.a,{className:"".concat(h.a.formInput),required:!0,variant:"outlined",type:"password",value:l,id:"standard-basic-password",label:"Password",onChange:function(e){return u(e.target.value)}}),Object(n.jsx)("div",{className:h.a.buttons,children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return ye.signInWithEmailAndPassword(a,l).catch((function(e){_(!0)}))},disabled:p,children:"Submit"})})]})]})})]})}var Tt=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("countyList"))),t=Object(r.a)(e,2),a=t[0],o=t[1];return Object(c.useEffect)((function(){a||x.a.get("https://ckyxnow688.execute-api.eu-west-2.amazonaws.com/dev/county/list").then((function(e){e.data&&(e.data.sort((function(e,t){return e.county>t.county?1:-1})),localStorage.setItem("countyList",JSON.stringify(e.data)),o(JSON.parse(localStorage.getItem("countyList"))))})).catch((function(e){return console.log(e)}))}),[a]),Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(l.a,{children:Object(n.jsxs)(d.d,{children:[Object(n.jsxs)(d.b,{exact:!0,path:"/awareness",children:[Object(n.jsx)(nt,{}),Object(n.jsx)(gt,{})]}),Object(n.jsx)(d.b,{exact:!0,path:"/signup",children:Object(n.jsx)(U,{})}),Object(n.jsx)(d.b,{exact:!0,path:"/signin",children:Object(n.jsx)(M,{})}),Object(n.jsxs)(d.b,{exact:!0,path:"/profile",children:[Object(n.jsx)(nt,{}),Object(n.jsx)(ze,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/updates",children:[Object(n.jsx)(nt,{}),Object(n.jsx)(Q,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/find-water",children:[Object(n.jsx)(nt,{}),Object(n.jsx)(Be,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/awareness-category",children:[Object(n.jsx)(we,{}),Object(n.jsx)(wt,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/awareness-content",children:[Object(n.jsx)(we,{}),Object(n.jsx)(It,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/users",children:[Object(n.jsx)(we,{}),Object(n.jsx)(ie,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/water-stations",children:[Object(n.jsx)(we,{}),Object(n.jsx)(de,{})]}),Object(n.jsxs)(d.b,{exact:!0,path:"/admin/events",children:[Object(n.jsx)(we,{}),Object(n.jsx)(At,{})]}),Object(n.jsx)(d.b,{exact:!0,path:"/admin",children:Object(n.jsx)(Dt,{})}),Object(n.jsx)(d.b,{path:"/",children:Object(n.jsx)(ct,{})})]})})})},Lt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,502)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),o(e),i(e)}))};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(Tt,{})}),document.getElementById("root")),Lt()},9:function(e,t,a){e.exports={container:"Form_container__2WtlN",profile:"Form_profile__3qCoo",admin:"Form_admin__21k3F",content:"Form_content__1Rv4U",title:"Form_title__3G1am",awareness:"Form_awareness__1bQEh",adminContent:"Form_adminContent__2nO7M",subtitle:"Form_subtitle__3rHUl",confirmation:"Form_confirmation__2Lcs9",signInForm:"Form_signInForm__1PAMX",profileForm:"Form_profileForm__3_nWQ",adminForm:"Form_adminForm__2mOLX",formInput:"Form_formInput__2ZKPV",landingForm:"Form_landingForm__1euFz",actions:"Form_actions__8LmcS",link:"Form_link__vav7t",col2:"Form_col2__3013V",col3:"Form_col3__2XpXq",last:"Form_last__1nPx3",buttons:"Form_buttons__2kaBU",contentBox:"Form_contentBox__3X8e6",border:"Form_border__1yFbE",userBox:"Form_userBox__2e3dI",subscriptionBox:"Form_subscriptionBox__hmJ_S",deleteBox:"Form_deleteBox__3ezyc"}}},[[416,1,2]]]);
//# sourceMappingURL=main.273aa7ec.chunk.js.map